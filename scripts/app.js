/**
 * @license
 * lodash 3.4.0 (Custom Build) <https://lodash.com/>
 * Build: `lodash modern -o ./lodash.js`
 * Copyright 2012-2015 The Dojo Foundation <http://dojofoundation.org/>
 * Based on Underscore.js 1.8.2 <http://underscorejs.org/LICENSE>
 * Copyright 2009-2015 Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 * Available under MIT license <https://lodash.com/license>
 */

/**
 * Random number god
 * This code is an implementation of Alea algorithm; (C) 2010 Johannes Baagøe.
 * Alea is licensed according to the http://en.wikipedia.org/wiki/MIT_License.
 */

/**
     * @namespace
     * This code is an implementation of the ROT.js cellular map generation by Ondřej Žára, https://github.com/ondras/rot.js
     * Alea is licensed according to the http://en.wikipedia.org/wiki/MIT_License.
     */

/*!
 *
 * Copyright 2009-2012 Kris Kowal under the terms of the MIT
 * license found at http://github.com/kriskowal/q/raw/master/LICENSE
 *
 * With parts by Tyler Close
 * Copyright 2007-2009 Tyler Close under the terms of the MIT X license found
 * at http://www.opensource.org/licenses/mit-license.html
 * Forked at ref_send.js version: 2009-05-11
 *
 * With parts by Mark Miller
 * Copyright (C) 2011 Google Inc.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *
 */

/**
   * http://paulirish.com/2011/requestanimationframe-for-smart-animating/
   * http://my.opera.com/emoller/blog/2011/12/20/requestanimationframe-for-smart-er-animating
   * requestAnimationFrame polyfill by Erik Möller. fixes from Paul Irish and Tino Zijdel
   * MIT license
   */

(function(){function n(n,e){if(n!==e){var t=n===n,r=e===e;if(n>e||!t||"undefined"==typeof n&&r)return 1;if(e>n||!r||"undefined"==typeof e&&t)return-1}return 0}function e(n,e,t){if(e!==e)return p(n,t);for(var r=t-1,i=n.length;++r<i;)if(n[r]===e)return r;return-1}function t(n){return"function"==typeof n||!1}function r(n){return"string"==typeof n?n:null==n?"":n+""}function i(n){return n.charCodeAt(0)}function o(n,e){for(var t=-1,r=n.length;++t<r&&e.indexOf(n.charAt(t))>-1;);return t}function a(n,e){for(var t=n.length;t--&&e.indexOf(n.charAt(t))>-1;);return t}function u(e,t){return n(e.criteria,t.criteria)||e.index-t.index}function c(e,t,r){for(var i=-1,o=e.criteria,a=t.criteria,u=o.length,c=r.length;++i<u;){var f=n(o[i],a[i]);if(f)return i>=c?f:r[i]?f:-1*f}return e.index-t.index}function f(n){return $e[n]}function l(n){return De[n]}function s(n){return"\\"+He[n]}function p(n,e,t){for(var r=n.length,i=e+(t?0:-1);t?i--:++i<r;){var o=n[i];if(o!==o)return i}return-1}function h(n){return n&&"object"==typeof n||!1}function d(n){return 160>=n&&n>=9&&13>=n||32==n||160==n||5760==n||6158==n||n>=8192&&(8202>=n||8232==n||8233==n||8239==n||8287==n||12288==n||65279==n)}function v(n,e){for(var t=-1,r=n.length,i=-1,o=[];++t<r;)if(n[t]===e){n[t]=U;o[++i]=t}return o}function _(n,e){for(var t,r=-1,i=n.length,o=-1,a=[];++r<i;){var u=n[r],c=e?e(u,r,n):u;if(!r||t!==c){t=c;a[++o]=u}}return a}function g(n){for(var e=-1,t=n.length;++e<t&&d(n.charCodeAt(e)););return e}function y(n){for(var e=n.length;e--&&d(n.charCodeAt(e)););return e}function m(n){return Ue[n]}function x(d){function X(n){if(h(n)&&!nc(n)&&!(n instanceof $e)){if(n instanceof Z)return n;if(iu.call(n,"__chain__")&&iu.call(n,"__wrapped__"))return $r(n)}return new Z(n)}function K(){}function Z(n,e,t){this.__wrapped__=n;this.__actions__=t||[];this.__chain__=!!e}function $e(n){this.__wrapped__=n;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=!1;this.__iteratees__=null;this.__takeCount__=Wu;this.__views__=null}function De(){var n=this.__actions__,e=this.__iteratees__,t=this.__views__,r=new $e(this.__wrapped__);r.__actions__=n?Je(n):null;r.__dir__=this.__dir__;r.__dropCount__=this.__dropCount__;r.__filtered__=this.__filtered__;r.__iteratees__=e?Je(e):null;r.__takeCount__=this.__takeCount__;r.__views__=t?Je(t):null;return r}function Ue(){if(this.__filtered__){var n=new $e(this);n.__dir__=-1;n.__filtered__=!0}else{n=this.clone();n.__dir__*=-1}return n}function Me(){var n=this.__wrapped__.value();if(!nc(n))return Kt(n,this.__actions__);var e=this.__dir__,t=0>e,r=br(0,n.length,this.__views__),i=r.start,o=r.end,a=o-i,u=this.__dropCount__,c=Ru(a,this.__takeCount__),f=t?o:i-1,l=this.__iteratees__,s=l?l.length:0,p=0,h=[];n:for(;a--&&c>p;){f+=e;for(var d=-1,v=n[f];++d<s;){var _=l[d],g=_.iteratee,y=_.type;if(y!=F)var m=g(v);else{_.done=_.done&&(t?f<_.index:f>_.index);_.index=f;m=_.done||(_.done=!g(v))}if(y==N)v=m;else if(!m){if(y==$)break n;continue n}}u?u--:h[p++]=v}return h}function He(){this.__data__={}}function Be(n){return this.has(n)&&delete this.__data__[n]}function qe(n){return"__proto__"==n?b:this.__data__[n]}function ze(n){return"__proto__"!=n&&iu.call(this.__data__,n)}function Ye(n,e){"__proto__"!=n&&(this.__data__[n]=e);return this}function Xe(n){var e=n?n.length:0;this.data={hash:ju(null),set:new gu};for(;e--;)this.push(n[e])}function Ve(n,e){var t=n.data,r="string"==typeof e||To(e)?t.set.has(e):t.hash[e];return r?0:-1}function Ke(n){var e=this.data;"string"==typeof n||To(n)?e.set.add(n):e.hash[n]=!0}function Je(n,e){var t=-1,r=n.length;e||(e=Ba(r));for(;++t<r;)e[t]=n[t];return e}function Ze(n,e){for(var t=-1,r=n.length;++t<r&&e(n[t],t,n)!==!1;);return n}function nt(n,e){for(var t=n.length;t--&&e(n[t],t,n)!==!1;);return n}function et(n,e){for(var t=-1,r=n.length;++t<r;)if(!e(n[t],t,n))return!1;return!0}function tt(n,e){for(var t=-1,r=n.length,i=-1,o=[];++t<r;){var a=n[t];e(a,t,n)&&(o[++i]=a)}return o}function rt(n,e){for(var t=-1,r=n.length,i=Ba(r);++t<r;)i[t]=e(n[t],t,n);return i}function it(n){for(var e=-1,t=n.length,r=Su;++e<t;){var i=n[e];i>r&&(r=i)}return r}function ot(n){for(var e=-1,t=n.length,r=Wu;++e<t;){var i=n[e];r>i&&(r=i)}return r}function at(n,e,t,r){var i=-1,o=n.length;r&&o&&(t=n[++i]);for(;++i<o;)t=e(t,n[i],i,n);return t}function ut(n,e,t,r){var i=n.length;r&&i&&(t=n[--i]);for(;i--;)t=e(t,n[i],i,n);return t}function ct(n,e){for(var t=-1,r=n.length;++t<r;)if(e(n[t],t,n))return!0;return!1}function ft(n,e){return"undefined"==typeof n?e:n}function lt(n,e,t,r){return"undefined"!=typeof n&&iu.call(r,t)?n:e}function st(n,e,t){var r=oc(e);if(!t)return ht(e,n,r);for(var i=-1,o=r.length;++i<o;){var a=r[i],u=n[a],c=t(u,e[a],a,n,e);(c===c?c===u:u!==u)&&("undefined"!=typeof u||a in n)||(n[a]=c)}return n}function pt(n,e){for(var t=-1,r=n.length,i=Rr(r),o=e.length,a=Ba(o);++t<o;){var u=e[t];if(i){u=parseFloat(u);a[t]=Pr(u,r)?n[u]:b}else a[t]=n[u]}return a}function ht(n,e,t){if(!t){t=e;e={}}for(var r=-1,i=t.length;++r<i;){var o=t[r];e[o]=n[o]}return e}function dt(n,e){for(var t=-1,r=e.length;++t<r;){var i=e[t];n[i]=dr(n[i],k,n)}return n}function vt(n,e,t){var r=typeof n;return"function"==r?"undefined"!=typeof e&&Lr(n)?nr(n,e,t):n:null==n?Ea:"object"==r?Nt(n):"undefined"==typeof e?Mt(n+""):$t(n+"",e)}function _t(n,e,t,r,i,o,a){var u;t&&(u=i?t(n,r,i):t(n));if("undefined"!=typeof u)return u;if(!To(n))return n;var c=nc(n);if(c){u=wr(n);if(!e)return Je(n,u)}else{var f=au.call(n),l=f==Y;if(f!=Q&&f!=M&&(!l||i))return Fe[f]?jr(n,f,e):i?n:{};u=kr(l?{}:n);if(!e)return ht(n,u,oc(n))}o||(o=[]);a||(a=[]);for(var s=o.length;s--;)if(o[s]==n)return a[s];o.push(n);a.push(u);(c?Ze:Tt)(n,function(r,i){u[i]=_t(r,e,t,i,n,o,a)});return u}function gt(n,e,t,r){if("function"!=typeof n)throw new Ja(D);return yu(function(){n.apply(b,zt(t,r))},e)}function yt(n,t){var r=n?n.length:0,i=[];if(!r)return i;var o=-1,a=xr(),u=a==e,c=u&&t.length>=200?qu(t):null,f=t.length;if(c){a=Ve;u=!1;t=c}n:for(;++o<r;){var l=n[o];if(u&&l===l){for(var s=f;s--;)if(t[s]===l)continue n;i.push(l)}else a(t,l,0)<0&&i.push(l)}return i}function mt(n,e){var t=n?n.length:0;if(!Rr(t))return Tt(n,e);for(var r=-1,i=Nr(n);++r<t&&e(i[r],r,i)!==!1;);return n}function xt(n,e){var t=n?n.length:0;if(!Rr(t))return Et(n,e);for(var r=Nr(n);t--&&e(r[t],t,r)!==!1;);return n}function bt(n,e){var t=!0;mt(n,function(n,r,i){t=!!e(n,r,i);return t});return t}function wt(n,e,t,r){var i=n.length;t=null==t?0:+t||0;0>t&&(t=-t>i?0:i+t);r="undefined"==typeof r||r>i?i:+r||0;0>r&&(r+=i);i=t>r?0:r>>>0;t>>>=0;for(;i>t;)n[t++]=e;return n}function kt(n,e){var t=[];mt(n,function(n,r,i){e(n,r,i)&&t.push(n)});return t}function jt(n,e,t,r){var i;t(n,function(n,t,o){if(e(n,t,o)){i=r?t:n;return!1}});return i}function Lt(n,e,t,r){for(var i=r-1,o=n.length,a=-1,u=[];++i<o;){var c=n[i];if(h(c)&&Rr(c.length)&&(nc(c)||wo(c))){e&&(c=Lt(c,e,t,0));var f=-1,l=c.length;u.length+=l;for(;++f<l;)u[++a]=c[f]}else t||(u[++a]=c)}return u}function Pt(n,e,t){for(var r=-1,i=Nr(n),o=t(n),a=o.length;++r<a;){var u=o[r];if(e(i[u],u,i)===!1)break}return n}function At(n,e,t){for(var r=Nr(n),i=t(n),o=i.length;o--;){var a=i[o];if(e(r[a],a,r)===!1)break}return n}function Rt(n,e){return Pt(n,e,Jo)}function Tt(n,e){return Pt(n,e,oc)}function Et(n,e){return At(n,e,oc)}function It(n,e){for(var t=-1,r=e.length,i=-1,o=[];++t<r;){var a=e[t];tc(n[a])&&(o[++i]=a)}return o}function Ot(n,e,t){var r=-1,i="function"==typeof e,o=n?n.length:0,a=Rr(o)?Ba(o):[];mt(n,function(n){var o=i?e:null!=n&&n[e];a[++r]=o?o.apply(n,t):b});return a}function St(n,e,t,r,i,o){if(n===e)return 0!==n||1/n==1/e;var a=typeof n,u=typeof e;return"function"!=a&&"object"!=a&&"function"!=u&&"object"!=u||null==n||null==e?n!==n&&e!==e:Wt(n,e,St,t,r,i,o)}function Wt(n,e,t,r,i,o,a){var u=nc(n),c=nc(e),f=H,l=H;if(!u){f=au.call(n);f==M?f=Q:f!=Q&&(u=No(n))}if(!c){l=au.call(e);l==M?l=Q:l!=Q&&(c=No(e))}var s=f==Q,p=l==Q,h=f==l;if(h&&!u&&!s)return _r(n,e,f);var d=s&&iu.call(n,"__wrapped__"),v=p&&iu.call(e,"__wrapped__");if(d||v)return t(d?n.value():n,v?e.value():e,r,i,o,a);if(!h)return!1;o||(o=[]);a||(a=[]);for(var _=o.length;_--;)if(o[_]==n)return a[_]==e;o.push(n);a.push(e);var g=(u?vr:gr)(n,e,t,r,i,o,a);o.pop();a.pop();return g}function Ct(n,e,t,r,i){var o=e.length;if(null==n)return!o;for(var a=-1,u=!i;++a<o;)if(u&&r[a]?t[a]!==n[e[a]]:!iu.call(n,e[a]))return!1;a=-1;for(;++a<o;){var c=e[a];if(u&&r[a])var f=iu.call(n,c);else{var l=n[c],s=t[a];f=i?i(l,s,c):b;"undefined"==typeof f&&(f=St(s,l,i,!0))}if(!f)return!1}return!0}function Ft(n,e){var t=[];mt(n,function(n,r,i){t.push(e(n,r,i))});return t}function Nt(n){var e=oc(n),t=e.length;if(1==t){var r=e[0],i=n[r];if(Tr(i))return function(n){return null!=n&&n[r]===i&&iu.call(n,r)}}for(var o=Ba(t),a=Ba(t);t--;){i=n[e[t]];o[t]=i;a[t]=Tr(i)}return function(n){return Ct(n,e,o,a)}}function $t(n,e){return Tr(e)?function(t){return null!=t&&t[n]===e}:function(t){return null!=t&&St(e,t[n],null,!0)}}function Dt(n,e,t,r,i){if(!To(n))return n;var o=Rr(e.length)&&(nc(e)||No(e));(o?Ze:Tt)(e,function(e,a,u){if(h(e)){r||(r=[]);i||(i=[]);return Ut(n,u,a,Dt,t,r,i)}var c=n[a],f=t?t(c,e,a,n,u):b,l="undefined"==typeof f;l&&(f=e);!o&&"undefined"==typeof f||!l&&(f===f?f===c:c!==c)||(n[a]=f)});return n}function Ut(n,e,t,r,i,o,a){for(var u=o.length,c=e[t];u--;)if(o[u]==c){n[t]=a[u];return}var f=n[t],l=i?i(f,c,t,n,e):b,s="undefined"==typeof l;if(s){l=c;Rr(c.length)&&(nc(c)||No(c))?l=nc(f)?f:f?Je(f):[]:rc(c)||wo(c)?l=wo(f)?Uo(f):rc(f)?f:{}:s=!1}o.push(c);a.push(l);s?n[t]=r(l,c,i,o,a):(l===l?l!==f:f===f)&&(n[t]=l)}function Mt(n){return function(e){return null==e?b:e[n]}}function Ht(e,t){var r=t.length,i=pt(e,t);t.sort(n);for(;r--;){var o=parseFloat(t[r]);if(o!=a&&Pr(o)){var a=o;mu.call(e,o,1)}}return i}function Bt(n,e){return n+hu(Ou()*(e-n+1))}function qt(n,e,t,r,i){i(n,function(n,i,o){t=r?(r=!1,n):e(t,n,i,o)});return t}function zt(n,e,t){var r=-1,i=n.length;e=null==e?0:+e||0;0>e&&(e=-e>i?0:i+e);t="undefined"==typeof t||t>i?i:+t||0;0>t&&(t+=i);i=e>t?0:t-e>>>0;e>>>=0;for(var o=Ba(i);++r<i;)o[r]=n[r+e];return o}function Yt(n,e){var t;mt(n,function(n,r,i){t=e(n,r,i);return!t});return!!t}function Xt(n,e){var t=n.length;n.sort(e);for(;t--;)n[t]=n[t].value;return n}function Gt(n,e,t){var r=-1,i=n.length,o=Rr(i)?Ba(i):[];mt(n,function(n){for(var t=e.length,i=Ba(t);t--;)i[t]=null==n?b:n[e[t]];o[++r]={criteria:i,index:r,value:n}});return Xt(o,function(n,e){return c(n,e,t)})}function Qt(n,t){var r=-1,i=xr(),o=n.length,a=i==e,u=a&&o>=200,c=u?qu():null,f=[];if(c){i=Ve;a=!1}else{u=!1;c=t?[]:f}n:for(;++r<o;){var l=n[r],s=t?t(l,r,n):l;if(a&&l===l){for(var p=c.length;p--;)if(c[p]===s)continue n;t&&c.push(s);f.push(l)}else if(i(c,s,0)<0){(t||u)&&c.push(s);f.push(l)}}return f}function Vt(n,e){for(var t=-1,r=e.length,i=Ba(r);++t<r;)i[t]=n[e[t]];return i}function Kt(n,e){var t=n;t instanceof $e&&(t=t.value());for(var r=-1,i=e.length;++r<i;){var o=[t],a=e[r];vu.apply(o,a.args);t=a.func.apply(a.thisArg,o)}return t}function Jt(n,e,t){var r=0,i=n?n.length:r;if("number"==typeof e&&e===e&&Nu>=i){for(;i>r;){var o=r+i>>>1,a=n[o];(t?e>=a:e>a)?r=o+1:i=o}return i}return Zt(n,e,Ea,t)}function Zt(n,e,t,r){e=t(e);for(var i=0,o=n?n.length:0,a=e!==e,u="undefined"==typeof e;o>i;){var c=hu((i+o)/2),f=t(n[c]),l=f===f;if(a)var s=l||r;else s=u?l&&(r||"undefined"!=typeof f):r?e>=f:e>f;s?i=c+1:o=c}return Ru(o,Fu)}function nr(n,e,t){if("function"!=typeof n)return Ea;if("undefined"==typeof e)return n;switch(t){case 1:return function(t){return n.call(e,t)};case 3:return function(t,r,i){return n.call(e,t,r,i)};case 4:return function(t,r,i,o){return n.call(e,t,r,i,o)};case 5:return function(t,r,i,o,a){return n.call(e,t,r,i,o,a)}}return function(){return n.apply(e,arguments)}}function er(n){return lu.call(n,0)}function tr(n,e,t){for(var r=t.length,i=-1,o=Au(n.length-r,0),a=-1,u=e.length,c=Ba(o+u);++a<u;)c[a]=e[a];for(;++i<r;)c[t[i]]=n[i];for(;o--;)c[a++]=n[i++];return c}function rr(n,e,t){for(var r=-1,i=t.length,o=-1,a=Au(n.length-i,0),u=-1,c=e.length,f=Ba(a+c);++o<a;)f[o]=n[o];for(var l=o;++u<c;)f[l+u]=e[u];for(;++r<i;)f[l+t[r]]=n[o++];return f}function ir(n,e){return function(t,r,i){var o=e?e():{};r=mr(r,i,3);if(nc(t))for(var a=-1,u=t.length;++a<u;){var c=t[a];n(o,c,r(c,a,t),t)}else mt(t,function(e,t,i){n(o,e,r(e,t,i),i)});return o}}function or(n){return function(){var e=arguments,t=e.length,r=e[0];if(2>t||null==r)return r;var i=e[t-2],o=e[t-1],a=e[3];if(t>3&&"function"==typeof i){i=nr(i,o,5);t-=2}else{i=t>2&&"function"==typeof o?o:null;t-=i?1:0}if(a&&Ar(e[1],e[2],a)){i=3==t?null:i;t=2}for(var u=0;++u<t;){var c=e[u];c&&n(r,c,i)}return r}}function ar(n,e){function t(){return(this instanceof t?r:n).apply(e,arguments)}var r=fr(n);return t}function ur(n){return function(){var e=arguments.length,t=e,r=n?e-1:0;if(!e)return function(){return arguments[0]};for(var i=Ba(e);t--;){i[t]=arguments[t];if("function"!=typeof i[t])throw new Ja(D)}return function(){for(var t=r,o=i[t].apply(this,arguments);n?t--:++t<e;)o=i[t].call(this,o);return o}}}function cr(n){return function(e){for(var t=-1,r=Pa(la(e)),i=r.length,o="";++t<i;)o=n(o,r[t],t);return o}}function fr(n){return function(){var e=Hu(n.prototype),t=n.apply(e,arguments);return To(t)?t:e}}function lr(n,e){return function(t,r,o){o&&Ar(t,r,o)&&(r=null);var a=mr(),u=null==r;if(a!==vt||!u){u=!1;r=a(r,o,3)}if(u){var c=nc(t);if(c||!Fo(t))return n(c?t:Fr(t));r=i}return yr(t,r,e)}}function sr(n,e,t,r,i,o,a,u,c,f){function l(){for(var x=arguments.length,b=x,w=Ba(x);b--;)w[b]=arguments[b];r&&(w=tr(w,r,i));o&&(w=rr(w,o,a));if(d||g){var L=l.placeholder,P=v(w,L);x-=P.length;if(f>x){var A=u?Je(u):null,E=Au(f-x,0),I=d?P:null,O=d?null:P,S=d?w:null,W=d?null:w;e|=d?R:T;e&=~(d?T:R);_||(e&=~(k|j));var C=sr(n,e,t,S,I,W,O,A,c,E);C.placeholder=L;return C}}var F=p?t:this;h&&(n=F[m]);u&&(w=Sr(w,u));s&&c<w.length&&(w.length=c);return(this instanceof l?y||fr(n):n).apply(F,w)}var s=e&I,p=e&k,h=e&j,d=e&P,_=e&L,g=e&A,y=!h&&fr(n),m=n;return l}function pr(n,e,t){var r=n.length;e=+e;if(r>=e||!Lu(e))return"";var i=e-r;t=null==t?" ":t+"";return ya(t,su(i/t.length)).slice(0,i)}function hr(n,e,t,r){function i(){for(var e=-1,u=arguments.length,c=-1,f=r.length,l=Ba(u+f);++c<f;)l[c]=r[c];for(;u--;)l[c++]=arguments[++e];return(this instanceof i?a:n).apply(o?t:this,l)}var o=e&k,a=fr(n);return i}function dr(n,e,t,r,i,o,a,u){var c=e&j;if(!c&&"function"!=typeof n)throw new Ja(D);var f=r?r.length:0;if(!f){e&=~(R|T);r=i=null}f-=i?i.length:0;if(e&T){var l=r,s=i;r=i=null}var p=!c&&zu(n),h=[n,e,t,r,i,l,s,o,a,u];if(p&&p!==!0){Er(h,p);e=h[1];u=h[9]}h[9]=null==u?c?0:n.length:Au(u-f,0)||0;if(e==k)var d=ar(h[0],h[2]);else d=e!=R&&e!=(k|R)||h[4].length?sr.apply(b,h):hr.apply(b,h);var v=p?Bu:Yu;return v(d,h)}function vr(n,e,t,r,i,o,a){var u=-1,c=n.length,f=e.length,l=!0;if(c!=f&&!(i&&f>c))return!1;for(;l&&++u<c;){var s=n[u],p=e[u];l=b;r&&(l=i?r(p,s,u):r(s,p,u));if("undefined"==typeof l)if(i)for(var h=f;h--;){p=e[h];l=s&&s===p||t(s,p,r,i,o,a);if(l)break}else l=s&&s===p||t(s,p,r,i,o,a)}return!!l}function _r(n,e,t){switch(t){case B:case q:return+n==+e;case z:return n.name==e.name&&n.message==e.message;case G:return n!=+n?e!=+e:0==n?1/n==1/e:n==+e;case V:case J:return n==e+""}return!1}function gr(n,e,t,r,i,o,a){var u=oc(n),c=u.length,f=oc(e),l=f.length;if(c!=l&&!i)return!1;for(var s,p=-1;++p<c;){var h=u[p],d=iu.call(e,h);if(d){var v=n[h],_=e[h];d=b;r&&(d=i?r(_,v,h):r(v,_,h));"undefined"==typeof d&&(d=v&&v===_||t(v,_,r,i,o,a))}if(!d)return!1;s||(s="constructor"==h)}if(!s){var g=n.constructor,y=e.constructor;if(g!=y&&"constructor"in n&&"constructor"in e&&!("function"==typeof g&&g instanceof g&&"function"==typeof y&&y instanceof y))return!1}return!0}function yr(n,e,t){var r=t?Wu:Su,i=r,o=i;mt(n,function(n,a,u){var c=e(n,a,u);if((t?i>c:c>i)||c===r&&c===o){i=c;o=n}});return o}function mr(n,e,t){var r=X.callback||Ra;r=r===Ra?vt:r;return t?r(n,e,t):r}function xr(n,t,r){var i=X.indexOf||Jr;i=i===Jr?e:i;return n?i(n,t,r):i}function br(n,e,t){for(var r=-1,i=t?t.length:0;++r<i;){var o=t[r],a=o.size;switch(o.type){case"drop":n+=a;break;case"dropRight":e-=a;break;case"take":e=Ru(e,n+a);break;case"takeRight":n=Au(n,e-a)}}return{start:n,end:e}}function wr(n){var e=n.length,t=new n.constructor(e);if(e&&"string"==typeof n[0]&&iu.call(n,"index")){t.index=n.index;t.input=n.input}return t}function kr(n){var e=n.constructor;"function"==typeof e&&e instanceof e||(e=Qa);return new e}function jr(n,e,t){var r=n.constructor;switch(e){case ne:return er(n);case B:case q:return new r(+n);case ee:case te:case re:case ie:case oe:case ae:case ue:case ce:case fe:var i=n.buffer;return new r(t?er(i):i,n.byteOffset,n.length);case G:case J:return new r(n);case V:var o=new r(n.source,be.exec(n));o.lastIndex=n.lastIndex}return o}function Lr(n){var e=X.support,t=!(e.funcNames?n.name:e.funcDecomp);if(!t){var r=tu.call(n);e.funcNames||(t=!we.test(r));if(!t){t=Te.test(r)||Oo(n);Bu(n,t)}}return t}function Pr(n,e){n=+n;e=null==e?Du:e;return n>-1&&n%1==0&&e>n}function Ar(n,e,t){if(!To(t))return!1;var r=typeof e;if("number"==r)var i=t.length,o=Rr(i)&&Pr(e,i);else o="string"==r&&e in t;if(o){var a=t[e];return n===n?n===a:a!==a}return!1}function Rr(n){return"number"==typeof n&&n>-1&&n%1==0&&Du>=n}function Tr(n){return n===n&&(0===n?1/n>0:!To(n))}function Er(n,e){var t=n[1],r=e[1],i=t|r,o=I|E,a=k|j,u=o|a|L|A,c=t&I&&!(r&I),f=t&E&&!(r&E),l=(f?n:e)[7],s=(c?n:e)[8],p=!(t>=E&&r>a||t>a&&r>=E),h=i>=o&&u>=i&&(E>t||(f||c)&&l.length<=s);if(!p&&!h)return n;if(r&k){n[2]=e[2];i|=t&k?0:L}var d=e[3];if(d){var _=n[3];n[3]=_?tr(_,d,e[4]):Je(d);n[4]=_?v(n[3],U):Je(e[4])}d=e[5];if(d){_=n[5];n[5]=_?rr(_,d,e[6]):Je(d);n[6]=_?v(n[5],U):Je(e[6])}d=e[7];d&&(n[7]=Je(d));r&I&&(n[8]=null==n[8]?e[8]:Ru(n[8],e[8]));null==n[9]&&(n[9]=e[9]);n[0]=e[0];n[1]=i;return n}function Ir(n,e){n=Nr(n);for(var t=-1,r=e.length,i={};++t<r;){var o=e[t];o in n&&(i[o]=n[o])}return i}function Or(n,e){var t={};Rt(n,function(n,r,i){e(n,r,i)&&(t[r]=n)});return t}function Sr(n,e){for(var t=n.length,r=Ru(e.length,t),i=Je(n);r--;){var o=e[r];n[r]=Pr(o,t)?i[o]:b}return n}function Wr(n){{var e;X.support}if(!h(n)||au.call(n)!=Q||!iu.call(n,"constructor")&&(e=n.constructor,"function"==typeof e&&!(e instanceof e)))return!1;var t;Rt(n,function(n,e){t=e});return"undefined"==typeof t||iu.call(n,t)}function Cr(n){for(var e=Jo(n),t=e.length,r=t&&n.length,i=X.support,o=r&&Rr(r)&&(nc(n)||i.nonEnumArgs&&wo(n)),a=-1,u=[];++a<t;){var c=e[a];(o&&Pr(c,r)||iu.call(n,c))&&u.push(c)}return u}function Fr(n){return null==n?[]:Rr(n.length)?To(n)?n:Qa(n):oa(n)}function Nr(n){return To(n)?n:Qa(n)}function $r(n){return n instanceof $e?n.clone():new Z(n.__wrapped__,n.__chain__,Je(n.__actions__))}function Dr(n,e,t){e=(t?Ar(n,e,t):null==e)?1:Au(+e||1,1);for(var r=0,i=n?n.length:0,o=-1,a=Ba(su(i/e));i>r;)a[++o]=zt(n,r,r+=e);return a}function Ur(n){for(var e=-1,t=n?n.length:0,r=-1,i=[];++e<t;){var o=n[e];o&&(i[++r]=o)}return i}function Mr(){for(var n=arguments,e=-1,t=n.length;++e<t;){var r=n[e];if(nc(r)||wo(r))break}return yt(r,Lt(n,!1,!0,++e))}function Hr(n,e,t){var r=n?n.length:0;if(!r)return[];(t?Ar(n,e,t):null==e)&&(e=1);return zt(n,0>e?0:e)}function Br(n,e,t){var r=n?n.length:0;if(!r)return[];(t?Ar(n,e,t):null==e)&&(e=1);e=r-(+e||0);return zt(n,0,0>e?0:e)}function qr(n,e,t){var r=n?n.length:0;if(!r)return[];e=mr(e,t,3);for(;r--&&e(n[r],r,n););return zt(n,0,r+1)}function zr(n,e,t){var r=n?n.length:0;if(!r)return[];var i=-1;e=mr(e,t,3);for(;++i<r&&e(n[i],i,n););return zt(n,i)}function Yr(n,e,t,r){var i=n?n.length:0;if(!i)return[];if(t&&"number"!=typeof t&&Ar(n,e,t)){t=0;r=i}return wt(n,e,t,r)}function Xr(n,e,t){var r=-1,i=n?n.length:0;e=mr(e,t,3);for(;++r<i;)if(e(n[r],r,n))return r;return-1}function Gr(n,e,t){var r=n?n.length:0;e=mr(e,t,3);for(;r--;)if(e(n[r],r,n))return r;return-1}function Qr(n){return n?n[0]:b}function Vr(n,e,t){var r=n?n.length:0;t&&Ar(n,e,t)&&(e=!1);return r?Lt(n,e,!1,0):[]}function Kr(n){var e=n?n.length:0;return e?Lt(n,!0,!1,0):[]}function Jr(n,t,r){var i=n?n.length:0;if(!i)return-1;if("number"==typeof r)r=0>r?Au(i+r,0):r;else if(r){var o=Jt(n,t),a=n[o];return(t===t?t===a:a!==a)?o:-1}return e(n,t,r||0)}function Zr(n){return Br(n,1)}function ni(){for(var n=[],t=-1,r=arguments.length,i=[],o=xr(),a=o==e;++t<r;){var u=arguments[t];if(nc(u)||wo(u)){n.push(u);i.push(a&&u.length>=120?qu(t&&u):null)}}r=n.length;var c=n[0],f=-1,l=c?c.length:0,s=[],p=i[0];n:for(;++f<l;){u=c[f];if((p?Ve(p,u):o(s,u,0))<0){t=r;for(;--t;){var h=i[t];if((h?Ve(h,u):o(n[t],u,0))<0)continue n}p&&p.push(u);s.push(u)}}return s}function ei(n){var e=n?n.length:0;return e?n[e-1]:b}function ti(n,e,t){var r=n?n.length:0;if(!r)return-1;var i=r;if("number"==typeof t)i=(0>t?Au(r+t,0):Ru(t||0,r-1))+1;else if(t){i=Jt(n,e,!0)-1;var o=n[i];return(e===e?e===o:o!==o)?i:-1}if(e!==e)return p(n,i,!0);for(;i--;)if(n[i]===e)return i;return-1}function ri(){var n=arguments,e=n[0];if(!e||!e.length)return e;for(var t=0,r=xr(),i=n.length;++t<i;)for(var o=0,a=n[t];(o=r(e,a,o))>-1;)mu.call(e,o,1);return e}function ii(n){return Ht(n||[],Lt(arguments,!1,!1,1))}function oi(n,e,t){var r=-1,i=n?n.length:0,o=[];e=mr(e,t,3);for(;++r<i;){var a=n[r];if(e(a,r,n)){o.push(a);mu.call(n,r--,1);i--}}return o}function ai(n){return Hr(n,1)}function ui(n,e,t){var r=n?n.length:0;if(!r)return[];if(t&&"number"!=typeof t&&Ar(n,e,t)){e=0;t=r}return zt(n,e,t)}function ci(n,e,t,r){var i=mr(t);return i===vt&&null==t?Jt(n,e):Zt(n,e,i(t,r,1))}function fi(n,e,t,r){var i=mr(t);return i===vt&&null==t?Jt(n,e,!0):Zt(n,e,i(t,r,1),!0)}function li(n,e,t){var r=n?n.length:0;if(!r)return[];(t?Ar(n,e,t):null==e)&&(e=1);return zt(n,0,0>e?0:e)}function si(n,e,t){var r=n?n.length:0;if(!r)return[];(t?Ar(n,e,t):null==e)&&(e=1);e=r-(+e||0);return zt(n,0>e?0:e)}function pi(n,e,t){var r=n?n.length:0;if(!r)return[];e=mr(e,t,3);for(;r--&&e(n[r],r,n););return zt(n,r+1)}function hi(n,e,t){var r=n?n.length:0;if(!r)return[];var i=-1;e=mr(e,t,3);for(;++i<r&&e(n[i],i,n););return zt(n,0,i)}function di(){return Qt(Lt(arguments,!1,!0,0))}function vi(n,t,r,i){var o=n?n.length:0;if(!o)return[];if(null!=t&&"boolean"!=typeof t){i=r;r=Ar(n,t,i)?null:t;t=!1}var a=mr();(a!==vt||null!=r)&&(r=a(r,i,3));return t&&xr()==e?_(n,r):Qt(n,r)}function _i(n){for(var e=-1,t=(n&&n.length&&it(rt(n,ru)))>>>0,r=Ba(t);++e<t;)r[e]=rt(n,Mt(e));return r}function gi(n){return yt(n,zt(arguments,1))}function yi(){for(var n=-1,e=arguments.length;++n<e;){var t=arguments[n];if(nc(t)||wo(t))var r=r?yt(r,t).concat(yt(t,r)):t}return r?Qt(r):[]}function mi(){for(var n=arguments.length,e=Ba(n);n--;)e[n]=arguments[n];return _i(e)}function xi(n,e){var t=-1,r=n?n.length:0,i={};!r||e||nc(n[0])||(e=[]);for(;++t<r;){var o=n[t];e?i[o]=e[t]:o&&(i[o[0]]=o[1])}return i}function bi(n){var e=X(n);e.__chain__=!0;return e}function wi(n,e,t){e.call(t,n);return n}function ki(n,e,t){return e.call(t,n)}function ji(){return bi(this)}function Li(){return new Z(this.value(),this.__chain__)}function Pi(n){for(var e,t=this;t instanceof K;){var r=$r(t);e?i.__wrapped__=r:e=r;var i=r;t=t.__wrapped__}i.__wrapped__=n;return e}function Ai(){var n=this.__wrapped__;if(n instanceof $e){this.__actions__.length&&(n=new $e(this));return new Z(n.reverse(),this.__chain__)}return this.thru(function(n){return n.reverse()})}function Ri(){return this.value()+""}function Ti(){return Kt(this.__wrapped__,this.__actions__)}function Ei(n){var e=n?n.length:0;Rr(e)&&(n=Fr(n));return pt(n,Lt(arguments,!1,!1,1))}function Ii(n,e,t){var r=nc(n)?et:bt;("function"!=typeof e||"undefined"!=typeof t)&&(e=mr(e,t,3));return r(n,e)}function Oi(n,e,t){var r=nc(n)?tt:kt;e=mr(e,t,3);return r(n,e)}function Si(n,e,t){if(nc(n)){var r=Xr(n,e,t);return r>-1?n[r]:b}e=mr(e,t,3);return jt(n,e,mt)}function Wi(n,e,t){e=mr(e,t,3);return jt(n,e,xt)}function Ci(n,e){return Si(n,Nt(e))}function Fi(n,e,t){return"function"==typeof e&&"undefined"==typeof t&&nc(n)?Ze(n,e):mt(n,nr(e,t,3))}function Ni(n,e,t){return"function"==typeof e&&"undefined"==typeof t&&nc(n)?nt(n,e):xt(n,nr(e,t,3))}function $i(n,e,t){var r=n?n.length:0;if(!Rr(r)){n=oa(n);r=n.length}if(!r)return!1;t="number"==typeof t?0>t?Au(r+t,0):t||0:0;return"string"==typeof n||!nc(n)&&Fo(n)?r>t&&n.indexOf(e,t)>-1:xr(n,e,t)>-1}function Di(n,e){return Ot(n,e,zt(arguments,2))}function Ui(n,e,t){var r=nc(n)?rt:Ft;e=mr(e,t,3);return r(n,e)}function Mi(n,e){return Ui(n,Mt(e))}function Hi(n,e,t,r){var i=nc(n)?at:qt;return i(n,mr(e,r,4),t,arguments.length<3,mt)}function Bi(n,e,t,r){var i=nc(n)?ut:qt;return i(n,mr(e,r,4),t,arguments.length<3,xt)}function qi(n,e,t){var r=nc(n)?tt:kt;e=mr(e,t,3);return r(n,function(n,t,r){return!e(n,t,r)})}function zi(n,e,t){if(t?Ar(n,e,t):null==e){n=Fr(n);var r=n.length;return r>0?n[Bt(0,r-1)]:b}var i=Yi(n);i.length=Ru(0>e?0:+e||0,i.length);return i}function Yi(n){n=Fr(n);for(var e=-1,t=n.length,r=Ba(t);++e<t;){var i=Bt(0,e);e!=i&&(r[e]=r[i]);r[i]=n[e]}return r}function Xi(n){var e=n?n.length:0;return Rr(e)?e:oc(n).length}function Gi(n,e,t){var r=nc(n)?ct:Yt;("function"!=typeof e||"undefined"!=typeof t)&&(e=mr(e,t,3));return r(n,e)}function Qi(n,e,t){if(null==n)return[];var r=-1,i=n.length,o=Rr(i)?Ba(i):[];t&&Ar(n,e,t)&&(e=null);e=mr(e,t,3);mt(n,function(n,t,i){o[++r]={criteria:e(n,t,i),index:r,value:n}});return Xt(o,u)}function Vi(n){if(null==n)return[];var e=arguments,t=e[3];t&&Ar(e[1],e[2],t)&&(e=[n,e[1]]);return Gt(n,Lt(e,!1,!1,1),[])}function Ki(n,e,t,r){if(null==n)return[];r&&Ar(e,t,r)&&(t=null);nc(e)||(e=null==e?[]:[e]);nc(t)||(t=null==t?[]:[t]);return Gt(n,e,t)}function Ji(n,e){return Oi(n,Nt(e))}function Zi(n,e){if("function"!=typeof e){if("function"!=typeof n)throw new Ja(D);var t=n;n=e;e=t}n=Lu(n=+n)?n:0;return function(){return--n<1?e.apply(this,arguments):void 0}}function no(n,e,t){t&&Ar(n,e,t)&&(e=null);e=n&&null==e?n.length:Au(+e||0,0);return dr(n,I,null,null,null,null,e)}function eo(n,e){var t;if("function"!=typeof e){if("function"!=typeof n)throw new Ja(D);var r=n;n=e;e=r}return function(){--n>0?t=e.apply(this,arguments):e=null;return t}}function to(n,e){var t=k;if(arguments.length>2){var r=zt(arguments,2),i=v(r,to.placeholder);t|=R}return dr(n,t,e,r,i)}function ro(n){return dt(n,arguments.length>1?Lt(arguments,!1,!1,1):Qo(n))}function io(n,e){var t=k|j;if(arguments.length>2){var r=zt(arguments,2),i=v(r,io.placeholder);t|=R}return dr(e,t,n,r,i)}function oo(n,e,t){t&&Ar(n,e,t)&&(e=null);var r=dr(n,P,null,null,null,null,null,e);r.placeholder=oo.placeholder;return r}function ao(n,e,t){t&&Ar(n,e,t)&&(e=null);var r=dr(n,A,null,null,null,null,null,e);r.placeholder=ao.placeholder;return r}function uo(n,e,t){function r(){p&&pu(p);c&&pu(c);c=p=h=b}function i(){var t=e-(Ku()-l);if(0>=t||t>e){c&&pu(c);var r=h;c=p=h=b;if(r){d=Ku();f=n.apply(s,u);p||c||(u=s=null)}}else p=yu(i,t)}function o(){p&&pu(p);c=p=h=b;if(_||v!==e){d=Ku();f=n.apply(s,u);p||c||(u=s=null)}}function a(){u=arguments;l=Ku();s=this;h=_&&(p||!g);if(v===!1)var t=g&&!p;else{c||g||(d=l);var r=v-(l-d),a=0>=r||r>v;if(a){c&&(c=pu(c));d=l;f=n.apply(s,u)}else c||(c=yu(o,r))}a&&p?p=pu(p):p||e===v||(p=yu(i,e));if(t){a=!0;f=n.apply(s,u)}!a||p||c||(u=s=null);return f}var u,c,f,l,s,p,h,d=0,v=!1,_=!0;if("function"!=typeof n)throw new Ja(D);e=0>e?0:+e||0;if(t===!0){var g=!0;_=!1}else if(To(t)){g=t.leading;v="maxWait"in t&&Au(+t.maxWait||0,e);_="trailing"in t?t.trailing:_}a.cancel=r;return a}function co(n){return gt(n,1,arguments,1)}function fo(n,e){return gt(n,e,arguments,2)}function lo(n,e){if("function"!=typeof n||e&&"function"!=typeof e)throw new Ja(D);var t=function(){var r=arguments,i=t.cache,o=e?e.apply(this,r):r[0];if(i.has(o))return i.get(o);var a=n.apply(this,r);i.set(o,a);return a};t.cache=new lo.Cache;return t}function so(n){if("function"!=typeof n)throw new Ja(D);return function(){return!n.apply(this,arguments)}}function po(n){return eo(n,2)}function ho(n){var e=zt(arguments,1),t=v(e,ho.placeholder);return dr(n,R,null,e,t)}function vo(n){var e=zt(arguments,1),t=v(e,vo.placeholder);return dr(n,T,null,e,t)}function _o(n){var e=Lt(arguments,!1,!1,1);return dr(n,E,null,null,null,e)}function go(n){if("function"!=typeof n)throw new Ja(D);return function(e){return n.apply(this,e)}}function yo(n,e,t){var r=!0,i=!0;if("function"!=typeof n)throw new Ja(D);if(t===!1)r=!1;else if(To(t)){r="leading"in t?!!t.leading:r;i="trailing"in t?!!t.trailing:i}Ne.leading=r;Ne.maxWait=+e;Ne.trailing=i;return uo(n,e,Ne)}function mo(n,e){e=null==e?Ea:e;return dr(e,R,null,[n],[])}function xo(n,e,t,r){if(e&&"boolean"!=typeof e&&Ar(n,e,t))e=!1;else if("function"==typeof e){r=t;t=e;e=!1}t="function"==typeof t&&nr(t,r,1);return _t(n,e,t)}function bo(n,e,t){e="function"==typeof e&&nr(e,t,1);return _t(n,!0,e)}function wo(n){var e=h(n)?n.length:b;return Rr(e)&&au.call(n)==M||!1}function ko(n){return n===!0||n===!1||h(n)&&au.call(n)==B||!1}function jo(n){return h(n)&&au.call(n)==q||!1}function Lo(n){return n&&1===n.nodeType&&h(n)&&au.call(n).indexOf("Element")>-1||!1}function Po(n){if(null==n)return!0;var e=n.length;return Rr(e)&&(nc(n)||Fo(n)||wo(n)||h(n)&&tc(n.splice))?!e:!oc(n).length}function Ao(n,e,t,r){t="function"==typeof t&&nr(t,r,3);if(!t&&Tr(n)&&Tr(e))return n===e;var i=t?t(n,e):b;return"undefined"==typeof i?St(n,e,t):!!i}function Ro(n){return h(n)&&"string"==typeof n.message&&au.call(n)==z||!1}function To(n){var e=typeof n;return"function"==e||n&&"object"==e||!1}function Eo(n,e,t,r){var i=oc(e),o=i.length;t="function"==typeof t&&nr(t,r,3);if(!t&&1==o){var a=i[0],u=e[a];if(Tr(u))return null!=n&&u===n[a]&&iu.call(n,a)}for(var c=Ba(o),f=Ba(o);o--;){u=c[o]=e[i[o]];f[o]=Tr(u)}return Ct(n,i,c,f,t)}function Io(n){return Wo(n)&&n!=+n}function Oo(n){return null==n?!1:au.call(n)==Y?cu.test(tu.call(n)):h(n)&&je.test(n)||!1}function So(n){return null===n}function Wo(n){return"number"==typeof n||h(n)&&au.call(n)==G||!1}function Co(n){return h(n)&&au.call(n)==V||!1}function Fo(n){return"string"==typeof n||h(n)&&au.call(n)==J||!1}function No(n){return h(n)&&Rr(n.length)&&Ce[au.call(n)]||!1}function $o(n){return"undefined"==typeof n}function Do(n){var e=n?n.length:0;return Rr(e)?e?Je(n):[]:oa(n)}function Uo(n){return ht(n,Jo(n))}function Mo(n,e,t){var r=Hu(n);t&&Ar(n,e,t)&&(e=null);return e?ht(e,r,oc(e)):r}function Ho(n){if(null==n)return n;var e=Je(arguments);e.push(ft);return ic.apply(b,e)}function Bo(n,e,t){e=mr(e,t,3);return jt(n,e,Tt,!0)}function qo(n,e,t){e=mr(e,t,3);return jt(n,e,Et,!0)}function zo(n,e,t){("function"!=typeof e||"undefined"!=typeof t)&&(e=nr(e,t,3));return Pt(n,e,Jo)}function Yo(n,e,t){e=nr(e,t,3);return At(n,e,Jo)}function Xo(n,e,t){("function"!=typeof e||"undefined"!=typeof t)&&(e=nr(e,t,3));return Tt(n,e)}function Go(n,e,t){e=nr(e,t,3);return At(n,e,oc)}function Qo(n){return It(n,Jo(n))}function Vo(n,e){return n?iu.call(n,e):!1}function Ko(n,e,t){t&&Ar(n,e,t)&&(e=null);for(var r=-1,i=oc(n),o=i.length,a={};++r<o;){var u=i[r],c=n[u];e?iu.call(a,c)?a[c].push(u):a[c]=[u]:a[c]=u}return a}function Jo(n){if(null==n)return[];To(n)||(n=Qa(n));var e=n.length;e=e&&Rr(e)&&(nc(n)||Mu.nonEnumArgs&&wo(n))&&e||0;for(var t=n.constructor,r=-1,i="function"==typeof t&&t.prototype===n,o=Ba(e),a=e>0;++r<e;)o[r]=r+"";for(var u in n)a&&Pr(u,e)||"constructor"==u&&(i||!iu.call(n,u))||o.push(u);return o}function Zo(n,e,t){var r={};e=mr(e,t,3);Tt(n,function(n,t,i){r[t]=e(n,t,i)});return r}function na(n,e,t){if(null==n)return{};if("function"!=typeof e){var r=rt(Lt(arguments,!1,!1,1),Ka);return Ir(n,yt(Jo(n),r))}e=nr(e,t,3);return Or(n,function(n,t,r){return!e(n,t,r)})}function ea(n){for(var e=-1,t=oc(n),r=t.length,i=Ba(r);++e<r;){var o=t[e];i[e]=[o,n[o]]}return i}function ta(n,e,t){return null==n?{}:"function"==typeof e?Or(n,nr(e,t,3)):Ir(n,Lt(arguments,!1,!1,1))}function ra(n,e,t){var r=null==n?b:n[e];"undefined"==typeof r&&(r=t);return tc(r)?r.call(n):r}function ia(n,e,t,r){var i=nc(n)||No(n);e=mr(e,r,4);if(null==t)if(i||To(n)){var o=n.constructor;t=i?nc(n)?new o:[]:Hu(tc(o)&&o.prototype)}else t={};(i?Ze:Tt)(n,function(n,r,i){return e(t,n,r,i)});return t}function oa(n){return Vt(n,oc(n))}function aa(n){return Vt(n,Jo(n))}function ua(n,e,t){e=+e||0;if("undefined"==typeof t){t=e;e=0}else t=+t||0;return n>=e&&t>n}function ca(n,e,t){t&&Ar(n,e,t)&&(e=t=null);var r=null==n,i=null==e;if(null==t)if(i&&"boolean"==typeof n){t=n;
n=1}else if("boolean"==typeof e){t=e;i=!0}if(r&&i){e=1;i=!1}n=+n||0;if(i){e=n;n=0}else e=+e||0;if(t||n%1||e%1){var o=Ou();return Ru(n+o*(e-n+parseFloat("1e-"+((o+"").length-1))),e)}return Bt(n,e)}function fa(n){n=r(n);return n&&n.charAt(0).toUpperCase()+n.slice(1)}function la(n){n=r(n);return n&&n.replace(Le,f)}function sa(n,e,t){n=r(n);e+="";var i=n.length;t=("undefined"==typeof t?i:Ru(0>t?0:+t||0,i))-e.length;return t>=0&&n.indexOf(e,t)==t}function pa(n){n=r(n);return n&&_e.test(n)?n.replace(de,l):n}function ha(n){n=r(n);return n&&Re.test(n)?n.replace(Ae,"\\$&"):n}function da(n,e,t){n=r(n);e=+e;var i=n.length;if(i>=e||!Lu(e))return n;var o=(e-i)/2,a=hu(o),u=su(o);t=pr("",u,t);return t.slice(0,a)+n+t}function va(n,e,t){n=r(n);return n&&pr(n,e,t)+n}function _a(n,e,t){n=r(n);return n&&n+pr(n,e,t)}function ga(n,e,t){t&&Ar(n,e,t)&&(e=0);return Iu(n,e)}function ya(n,e){var t="";n=r(n);e=+e;if(1>e||!n||!Lu(e))return t;do{e%2&&(t+=n);e=hu(e/2);n+=n}while(e);return t}function ma(n,e,t){n=r(n);t=null==t?0:Ru(0>t?0:+t||0,n.length);return n.lastIndexOf(e,t)==t}function xa(n,e,t){var i=X.templateSettings;t&&Ar(n,e,t)&&(e=t=null);n=r(n);e=st(st({},t||e),i,lt);var o,a,u=st(st({},e.imports),i.imports,lt),c=oc(u),f=Vt(u,c),l=0,p=e.interpolate||Pe,h="__p += '",d=Va((e.escape||Pe).source+"|"+p.source+"|"+(p===me?xe:Pe).source+"|"+(e.evaluate||Pe).source+"|$","g"),v="//# sourceURL="+("sourceURL"in e?e.sourceURL:"lodash.templateSources["+ ++We+"]")+"\n";n.replace(d,function(e,t,r,i,u,c){r||(r=i);h+=n.slice(l,c).replace(Ee,s);if(t){o=!0;h+="' +\n__e("+t+") +\n'"}if(u){a=!0;h+="';\n"+u+";\n__p += '"}r&&(h+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'");l=c+e.length;return e});h+="';\n";var _=e.variable;_||(h="with (obj) {\n"+h+"\n}\n");h=(a?h.replace(le,""):h).replace(se,"$1").replace(pe,"$1;");h="function("+(_||"obj")+") {\n"+(_?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(a?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+h+"return __p\n}";var g=Aa(function(){return Ya(c,v+"return "+h).apply(b,f)});g.source=h;if(Ro(g))throw g;return g}function ba(n,e,t){var i=n;n=r(n);if(!n)return n;if(t?Ar(i,e,t):null==e)return n.slice(g(n),y(n)+1);e+="";return n.slice(o(n,e),a(n,e)+1)}function wa(n,e,t){var i=n;n=r(n);return n?n.slice((t?Ar(i,e,t):null==e)?g(n):o(n,e+"")):n}function ka(n,e,t){var i=n;n=r(n);return n?(t?Ar(i,e,t):null==e)?n.slice(0,y(n)+1):n.slice(0,a(n,e+"")+1):n}function ja(n,e,t){t&&Ar(n,e,t)&&(e=null);var i=O,o=S;if(null!=e)if(To(e)){var a="separator"in e?e.separator:a;i="length"in e?+e.length||0:i;o="omission"in e?r(e.omission):o}else i=+e||0;n=r(n);if(i>=n.length)return n;var u=i-o.length;if(1>u)return o;var c=n.slice(0,u);if(null==a)return c+o;if(Co(a)){if(n.slice(u).search(a)){var f,l,s=n.slice(0,u);a.global||(a=Va(a.source,(be.exec(a)||"")+"g"));a.lastIndex=0;for(;f=a.exec(s);)l=f.index;c=c.slice(0,null==l?u:l)}}else if(n.indexOf(a,u)!=u){var p=c.lastIndexOf(a);p>-1&&(c=c.slice(0,p))}return c+o}function La(n){n=r(n);return n&&ve.test(n)?n.replace(he,m):n}function Pa(n,e,t){t&&Ar(n,e,t)&&(e=null);n=r(n);return n.match(e||Ie)||[]}function Aa(){for(var n=arguments[0],e=arguments.length,t=Ba(e?e-1:0);--e>0;)t[e-1]=arguments[e];try{return n.apply(b,t)}catch(r){return Ro(r)?r:new za(r)}}function Ra(n,e,t){t&&Ar(n,e,t)&&(e=null);return h(n)?Ia(n):vt(n,e)}function Ta(n){return function(){return n}}function Ea(n){return n}function Ia(n){return Nt(_t(n,!0))}function Oa(n,e){return $t(n+"",_t(e,!0))}function Sa(n,e,t){if(null==t){var r=To(e),i=r&&oc(e),o=i&&i.length&&It(e,i);if(!(o?o.length:r)){o=!1;t=e;e=n;n=this}}o||(o=It(e,oc(e)));var a=!0,u=-1,c=tc(n),f=o.length;t===!1?a=!1:To(t)&&"chain"in t&&(a=t.chain);for(;++u<f;){var l=o[u],s=e[l];n[l]=s;c&&(n.prototype[l]=function(e){return function(){var t=this.__chain__;if(a||t){var r=n(this.__wrapped__);(r.__actions__=Je(this.__actions__)).push({func:e,args:arguments,thisArg:n});r.__chain__=t;return r}var i=[this.value()];vu.apply(i,arguments);return e.apply(n,i)}}(s))}return n}function Wa(){d._=uu;return this}function Ca(){}function Fa(n){return Mt(n+"")}function Na(n){return function(e){return null==n?b:n[e]}}function $a(n,e,t){t&&Ar(n,e,t)&&(e=t=null);n=+n||0;t=null==t?1:+t||0;if(null==e){e=n;n=0}else e=+e||0;for(var r=-1,i=Au(su((e-n)/(t||1)),0),o=Ba(i);++r<i;){o[r]=n;n+=t}return o}function Da(n,e,t){n=+n;if(1>n||!Lu(n))return[];var r=-1,i=Ba(Ru(n,Cu));e=nr(e,t,1);for(;++r<n;)Cu>r?i[r]=e(r):e(r);return i}function Ua(n){var e=++ou;return r(n)+e}function Ma(n,e){return n+e}function Ha(n){nc(n)||(n=Fr(n));for(var e=n.length,t=0;e--;)t+=+n[e]||0;return t}d=d?Qe.defaults(Ge.Object(),d,Qe.pick(Ge,Se)):Ge;var Ba=d.Array,qa=d.Date,za=d.Error,Ya=d.Function,Xa=d.Math,Ga=d.Number,Qa=d.Object,Va=d.RegExp,Ka=d.String,Ja=d.TypeError,Za=Ba.prototype,nu=Qa.prototype,eu=(eu=d.window)&&eu.document,tu=Ya.prototype.toString,ru=Mt("length"),iu=nu.hasOwnProperty,ou=0,au=nu.toString,uu=d._,cu=Va("^"+ha(au).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),fu=Oo(fu=d.ArrayBuffer)&&fu,lu=Oo(lu=fu&&new fu(0).slice)&&lu,su=Xa.ceil,pu=d.clearTimeout,hu=Xa.floor,du=Oo(du=Qa.getPrototypeOf)&&du,vu=Za.push,_u=nu.propertyIsEnumerable,gu=Oo(gu=d.Set)&&gu,yu=d.setTimeout,mu=Za.splice,xu=Oo(xu=d.Uint8Array)&&xu,bu=Oo(bu=d.WeakMap)&&bu,wu=function(){try{var n=Oo(n=d.Float64Array)&&n,e=new n(new fu(10),0,1)&&n}catch(t){}return e}(),ku=Oo(ku=Ba.isArray)&&ku,ju=Oo(ju=Qa.create)&&ju,Lu=d.isFinite,Pu=Oo(Pu=Qa.keys)&&Pu,Au=Xa.max,Ru=Xa.min,Tu=Oo(Tu=qa.now)&&Tu,Eu=Oo(Eu=Ga.isFinite)&&Eu,Iu=d.parseInt,Ou=Xa.random,Su=Ga.NEGATIVE_INFINITY,Wu=Ga.POSITIVE_INFINITY,Cu=Xa.pow(2,32)-1,Fu=Cu-1,Nu=Cu>>>1,$u=wu?wu.BYTES_PER_ELEMENT:0,Du=Xa.pow(2,53)-1,Uu=bu&&new bu,Mu=X.support={};!function(){Mu.funcDecomp=!Oo(d.WinRTError)&&Te.test(x);Mu.funcNames="string"==typeof Ya.name;try{Mu.dom=11===eu.createDocumentFragment().nodeType}catch(n){Mu.dom=!1}try{Mu.nonEnumArgs=!_u.call(arguments,1)}catch(n){Mu.nonEnumArgs=!0}}(0,0);X.templateSettings={escape:ge,evaluate:ye,interpolate:me,variable:"",imports:{_:X}};var Hu=function(){function n(){}return function(e){if(To(e)){n.prototype=e;var t=new n;n.prototype=null}return t||d.Object()}}(),Bu=Uu?function(n,e){Uu.set(n,e);return n}:Ea;lu||(er=fu&&xu?function(n){var e=n.byteLength,t=wu?hu(e/$u):0,r=t*$u,i=new fu(e);if(t){var o=new wu(i,0,t);o.set(new wu(n,0,t))}if(e!=r){o=new xu(i,r);o.set(new xu(n,r))}return i}:Ta(null));var qu=ju&&gu?function(n){return new Xe(n)}:Ta(null),zu=Uu?function(n){return Uu.get(n)}:Ca,Yu=function(){var n=0,e=0;return function(t,r){var i=Ku(),o=C-(i-e);e=i;if(o>0){if(++n>=W)return t}else n=0;return Bu(t,r)}}(),Xu=ir(function(n,e,t){iu.call(n,t)?++n[t]:n[t]=1}),Gu=ir(function(n,e,t){iu.call(n,t)?n[t].push(e):n[t]=[e]}),Qu=ir(function(n,e,t){n[t]=e}),Vu=ir(function(n,e,t){n[t?0:1].push(e)},function(){return[[],[]]}),Ku=Tu||function(){return(new qa).getTime()},Ju=ur(),Zu=ur(!0),nc=ku||function(n){return h(n)&&Rr(n.length)&&au.call(n)==H||!1};Mu.dom||(Lo=function(n){return n&&1===n.nodeType&&h(n)&&!rc(n)||!1});var ec=Eu||function(n){return"number"==typeof n&&Lu(n)},tc=t(/x/)||xu&&!t(xu)?function(n){return au.call(n)==Y}:t,rc=du?function(n){if(!n||au.call(n)!=Q)return!1;var e=n.valueOf,t=Oo(e)&&(t=du(e))&&du(t);return t?n==t||du(n)==t:Wr(n)}:Wr,ic=or(st),oc=Pu?function(n){if(n)var e=n.constructor,t=n.length;return"function"==typeof e&&e.prototype===n||"function"!=typeof n&&t&&Rr(t)?Cr(n):To(n)?Pu(n):[]}:Cr,ac=or(Dt),uc=cr(function(n,e,t){e=e.toLowerCase();return n+(t?e.charAt(0).toUpperCase()+e.slice(1):e)}),cc=cr(function(n,e,t){return n+(t?"-":"")+e.toLowerCase()});8!=Iu(Oe+"08")&&(ga=function(n,e,t){(t?Ar(n,e,t):null==e)?e=0:e&&(e=+e);n=ba(n);return Iu(n,e||(ke.test(n)?16:10))});var fc=cr(function(n,e,t){return n+(t?"_":"")+e.toLowerCase()}),lc=cr(function(n,e,t){return n+(t?" ":"")+(e.charAt(0).toUpperCase()+e.slice(1))}),sc=lr(it),pc=lr(ot,!0);X.prototype=K.prototype;Z.prototype=Hu(K.prototype);Z.prototype.constructor=Z;$e.prototype=Hu(K.prototype);$e.prototype.constructor=$e;He.prototype["delete"]=Be;He.prototype.get=qe;He.prototype.has=ze;He.prototype.set=Ye;Xe.prototype.push=Ke;lo.Cache=He;X.after=Zi;X.ary=no;X.assign=ic;X.at=Ei;X.before=eo;X.bind=to;X.bindAll=ro;X.bindKey=io;X.callback=Ra;X.chain=bi;X.chunk=Dr;X.compact=Ur;X.constant=Ta;X.countBy=Xu;X.create=Mo;X.curry=oo;X.curryRight=ao;X.debounce=uo;X.defaults=Ho;X.defer=co;X.delay=fo;X.difference=Mr;X.drop=Hr;X.dropRight=Br;X.dropRightWhile=qr;X.dropWhile=zr;X.fill=Yr;X.filter=Oi;X.flatten=Vr;X.flattenDeep=Kr;X.flow=Ju;X.flowRight=Zu;X.forEach=Fi;X.forEachRight=Ni;X.forIn=zo;X.forInRight=Yo;X.forOwn=Xo;X.forOwnRight=Go;X.functions=Qo;X.groupBy=Gu;X.indexBy=Qu;X.initial=Zr;X.intersection=ni;X.invert=Ko;X.invoke=Di;X.keys=oc;X.keysIn=Jo;X.map=Ui;X.mapValues=Zo;X.matches=Ia;X.matchesProperty=Oa;X.memoize=lo;X.merge=ac;X.mixin=Sa;X.negate=so;X.omit=na;X.once=po;X.pairs=ea;X.partial=ho;X.partialRight=vo;X.partition=Vu;X.pick=ta;X.pluck=Mi;X.property=Fa;X.propertyOf=Na;X.pull=ri;X.pullAt=ii;X.range=$a;X.rearg=_o;X.reject=qi;X.remove=oi;X.rest=ai;X.shuffle=Yi;X.slice=ui;X.sortBy=Qi;X.sortByAll=Vi;X.sortByOrder=Ki;X.spread=go;X.take=li;X.takeRight=si;X.takeRightWhile=pi;X.takeWhile=hi;X.tap=wi;X.throttle=yo;X.thru=ki;X.times=Da;X.toArray=Do;X.toPlainObject=Uo;X.transform=ia;X.union=di;X.uniq=vi;X.unzip=_i;X.values=oa;X.valuesIn=aa;X.where=Ji;X.without=gi;X.wrap=mo;X.xor=yi;X.zip=mi;X.zipObject=xi;X.backflow=Zu;X.collect=Ui;X.compose=Zu;X.each=Fi;X.eachRight=Ni;X.extend=ic;X.iteratee=Ra;X.methods=Qo;X.object=xi;X.select=Oi;X.tail=ai;X.unique=vi;Sa(X,X);X.add=Ma;X.attempt=Aa;X.camelCase=uc;X.capitalize=fa;X.clone=xo;X.cloneDeep=bo;X.deburr=la;X.endsWith=sa;X.escape=pa;X.escapeRegExp=ha;X.every=Ii;X.find=Si;X.findIndex=Xr;X.findKey=Bo;X.findLast=Wi;X.findLastIndex=Gr;X.findLastKey=qo;X.findWhere=Ci;X.first=Qr;X.has=Vo;X.identity=Ea;X.includes=$i;X.indexOf=Jr;X.inRange=ua;X.isArguments=wo;X.isArray=nc;X.isBoolean=ko;X.isDate=jo;X.isElement=Lo;X.isEmpty=Po;X.isEqual=Ao;X.isError=Ro;X.isFinite=ec;X.isFunction=tc;X.isMatch=Eo;X.isNaN=Io;X.isNative=Oo;X.isNull=So;X.isNumber=Wo;X.isObject=To;X.isPlainObject=rc;X.isRegExp=Co;X.isString=Fo;X.isTypedArray=No;X.isUndefined=$o;X.kebabCase=cc;X.last=ei;X.lastIndexOf=ti;X.max=sc;X.min=pc;X.noConflict=Wa;X.noop=Ca;X.now=Ku;X.pad=da;X.padLeft=va;X.padRight=_a;X.parseInt=ga;X.random=ca;X.reduce=Hi;X.reduceRight=Bi;X.repeat=ya;X.result=ra;X.runInContext=x;X.size=Xi;X.snakeCase=fc;X.some=Gi;X.sortedIndex=ci;X.sortedLastIndex=fi;X.startCase=lc;X.startsWith=ma;X.sum=Ha;X.template=xa;X.trim=ba;X.trimLeft=wa;X.trimRight=ka;X.trunc=ja;X.unescape=La;X.uniqueId=Ua;X.words=Pa;X.all=Ii;X.any=Gi;X.contains=$i;X.detect=Si;X.foldl=Hi;X.foldr=Bi;X.head=Qr;X.include=$i;X.inject=Hi;Sa(X,function(){var n={};Tt(X,function(e,t){X.prototype[t]||(n[t]=e)});return n}(),!1);X.sample=zi;X.prototype.sample=function(n){return this.__chain__||null!=n?this.thru(function(e){return zi(e,n)}):zi(this.value())};X.VERSION=w;Ze(["bind","bindKey","curry","curryRight","partial","partialRight"],function(n){X[n].placeholder=X});Ze(["dropWhile","filter","map","takeWhile"],function(n,e){var t=e!=N,r=e==F;$e.prototype[n]=function(n,i){var o=this.__filtered__,a=o&&r?new $e(this):this.clone(),u=a.__iteratees__||(a.__iteratees__=[]);a.__filtered__=o||t;u.push({done:!1,index:0,iteratee:mr(n,i,1),type:e});return a}});Ze(["drop","take"],function(n,e){var t="__"+n+"Count__",r=n+"While";$e.prototype[n]=function(r){r=null==r?1:Au(hu(r)||0,0);var i=this.clone();if(i.__filtered__){var o=i[t];i[t]=e?Ru(o,r):o+r}else{var a=i.__views__||(i.__views__=[]);a.push({size:r,type:n+(i.__dir__<0?"Right":"")})}return i};$e.prototype[n+"Right"]=function(e){return this.reverse()[n](e).reverse()};$e.prototype[n+"RightWhile"]=function(n,e){return this.reverse()[r](n,e).reverse()}});Ze(["first","last"],function(n,e){var t="take"+(e?"Right":"");$e.prototype[n]=function(){return this[t](1).value()[0]}});Ze(["initial","rest"],function(n,e){var t="drop"+(e?"":"Right");$e.prototype[n]=function(){return this[t](1)}});Ze(["pluck","where"],function(n,e){var t=e?"filter":"map",r=e?Nt:Mt;$e.prototype[n]=function(n){return this[t](r(n))}});$e.prototype.compact=function(){return this.filter(Ea)};$e.prototype.reject=function(n,e){n=mr(n,e,1);return this.filter(function(e){return!n(e)})};$e.prototype.slice=function(n,e){n=null==n?0:+n||0;var t=0>n?this.takeRight(-n):this.drop(n);if("undefined"!=typeof e){e=+e||0;t=0>e?t.dropRight(-e):t.take(e-n)}return t};$e.prototype.toArray=function(){return this.drop(0)};Tt($e.prototype,function(n,e){var t=X[e],r=/^(?:filter|map|reject)|While$/.test(e),i=/^(?:first|last)$/.test(e);X.prototype[e]=function(){var e=arguments,o=(e.length,this.__chain__),a=this.__wrapped__,u=!!this.__actions__.length,c=a instanceof $e,f=e[0],l=c||nc(a);l&&r&&"function"==typeof f&&1!=f.length&&(c=l=!1);var s=c&&!u;if(i&&!o)return s?n.call(a):t.call(X,this.value());var p=function(n){var r=[n];vu.apply(r,e);return t.apply(X,r)};if(l){var h=s?a:new $e(this),d=n.apply(h,e);if(!i&&(u||d.__actions__)){var v=d.__actions__||(d.__actions__=[]);v.push({func:ki,args:[p],thisArg:X})}return new Z(d,o)}return this.thru(p)}});Ze(["concat","join","pop","push","shift","sort","splice","unshift"],function(n){var e=Za[n],t=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",r=/^(?:join|pop|shift)$/.test(n);X.prototype[n]=function(){var n=arguments;return r&&!this.__chain__?e.apply(this.value(),n):this[t](function(t){return e.apply(t,n)})}});$e.prototype.clone=De;$e.prototype.reverse=Ue;$e.prototype.value=Me;X.prototype.chain=ji;X.prototype.commit=Li;X.prototype.plant=Pi;X.prototype.reverse=Ai;X.prototype.toString=Ri;X.prototype.run=X.prototype.toJSON=X.prototype.valueOf=X.prototype.value=Ti;X.prototype.collect=X.prototype.map;X.prototype.head=X.prototype.first;X.prototype.select=X.prototype.filter;X.prototype.tail=X.prototype.rest;return X}var b,w="3.4.0",k=1,j=2,L=4,P=8,A=16,R=32,T=64,E=128,I=256,O=30,S="...",W=150,C=16,F=0,N=2,$=3,D="Expected a function",U="__lodash_placeholder__",M="[object Arguments]",H="[object Array]",B="[object Boolean]",q="[object Date]",z="[object Error]",Y="[object Function]",X="[object Map]",G="[object Number]",Q="[object Object]",V="[object RegExp]",K="[object Set]",J="[object String]",Z="[object WeakMap]",ne="[object ArrayBuffer]",ee="[object Float32Array]",te="[object Float64Array]",re="[object Int8Array]",ie="[object Int16Array]",oe="[object Int32Array]",ae="[object Uint8Array]",ue="[object Uint8ClampedArray]",ce="[object Uint16Array]",fe="[object Uint32Array]",le=/\b__p \+= '';/g,se=/\b(__p \+=) '' \+/g,pe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,he=/&(?:amp|lt|gt|quot|#39|#96);/g,de=/[&<>"'`]/g,ve=RegExp(he.source),_e=RegExp(de.source),ge=/<%-([\s\S]+?)%>/g,ye=/<%([\s\S]+?)%>/g,me=/<%=([\s\S]+?)%>/g,xe=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,be=/\w*$/,we=/^\s*function[ \n\r\t]+\w/,ke=/^0[xX]/,je=/^\[object .+?Constructor\]$/,Le=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Pe=/($^)/,Ae=/[.*+?^${}()|[\]\/\\]/g,Re=RegExp(Ae.source),Te=/\bthis\b/,Ee=/['\n\r\u2028\u2029\\]/g,Ie=function(){var n="[A-Z\\xc0-\\xd6\\xd8-\\xde]",e="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(n+"+(?="+n+e+")|"+n+"?"+e+"|"+n+"+|[0-9]+","g")}(),Oe=" 	\f ﻿\n\r\u2028\u2029 ᠎             　",Se=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window","WinRTError"],We=-1,Ce={};Ce[ee]=Ce[te]=Ce[re]=Ce[ie]=Ce[oe]=Ce[ae]=Ce[ue]=Ce[ce]=Ce[fe]=!0;Ce[M]=Ce[H]=Ce[ne]=Ce[B]=Ce[q]=Ce[z]=Ce[Y]=Ce[X]=Ce[G]=Ce[Q]=Ce[V]=Ce[K]=Ce[J]=Ce[Z]=!1;var Fe={};Fe[M]=Fe[H]=Fe[ne]=Fe[B]=Fe[q]=Fe[ee]=Fe[te]=Fe[re]=Fe[ie]=Fe[oe]=Fe[G]=Fe[Q]=Fe[V]=Fe[J]=Fe[ae]=Fe[ue]=Fe[ce]=Fe[fe]=!0;Fe[z]=Fe[Y]=Fe[X]=Fe[K]=Fe[Z]=!1;var Ne={leading:!1,maxWait:0,trailing:!1},$e={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},De={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},Ue={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},Me={"function":!0,object:!0},He={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Be=Me[typeof exports]&&exports&&!exports.nodeType&&exports,qe=Me[typeof module]&&module&&!module.nodeType&&module,ze=Be&&qe&&"object"==typeof global&&global,Ye=Me[typeof window]&&window,Xe=qe&&qe.exports===Be&&Be,Ge=ze||Ye!==(this&&this.window)&&Ye||this,Qe=x();if("function"==typeof define&&"object"==typeof define.amd&&define.amd){Ge._=Qe;define("lodash",[],function(){return Qe})}else Be&&qe?Xe?(qe.exports=Qe)._=Qe:Be._=Qe:Ge._=Qe}).call(this);define("eventmanager",[""],function(){function n(n,e){topics.hasOwnProperty(n)||(topics[n]=[]);topics[n].push(e);return!0}function e(n,e){if(!topics.hasOwnProperty(n))return!1;for(var t=0,r=topics[n].length;r>t;t++)if(String(topics[n][t])===String(e)){topics[n].splice(t,1);return!0}return!1}function t(){var n=Array.prototype.slice.call(arguments),e=n.shift();if(!topics.hasOwnProperty(e))return!1;for(var t=0,r=topics[e].length;r>t;t++)topics[e][t].apply(void 0,n);return!0}topics={};return{subscribe:n,unsubscrive:e,publish:t,topics:topics}});define("actorList",["eventmanager"],function(n){var e=[],t=[];n.subscribe("actor.create",function(n){e.push(n)});n.subscribe("actor.update",function(n){var t=_.findWhere(e,{uuid:n.variables.uuid});_.merge(t,n)});n.subscribe("actor.delete",function(n){var r=_.findWhere(e,{uuid:n});t.push(r.variables.uuid);e=_.without(e,r)});var r=function(){return e},i=function(){return t},o=function(){t=[]};return{getCleanUpList:i,clearCleanUpList:o,getActorList:r}});define("RNG",[],function(){function n(){t(Date.now())}function e(){return f}function t(n){n=1>n?1/n:n;f=n;l=(n>>>0)*d;n=69069*n+1>>>0;s=n*d;n=69069*n+1>>>0;p=n*d;h=1}function r(){var n=2091639*l+h*d;l=s;s=p;h=0|n;p=n-h;return p}function i(n,e){do var t=2*r()-1,i=2*r()-1,o=t*t+i*i;while(o>1||0==o);var a=t*Math.sqrt(-2*Math.log(o)/o);return(n||0)+a*(e||1)}function o(){return 1+Math.floor(100*r())}function a(n){var e=0;for(var t in n)e+=n[t];var i=Math.floor(r()*e),o=0;for(var t in n){o+=n[t];if(o>i)return t}return null}function u(){return[l,s,p,h]}function c(n){l=n[0];s=n[1];p=n[2];h=n[3]}var f,l=0,s=0,p=0,h=0,d=2.3283064365386963e-10;n();return{getSeed:e,setSeed:t,getUniform:r,getNormal:i,getPercentage:o,getWeightedValue:a,getState:u,setState:c}});define("graphNode",[],function(){function n(n,e,t){this.data={};this.x=n;this.y=e;this.pos={x:n,y:e};this.type=t}var e={OPEN:0,WALL:1};n.prototype.toString=function(){return"["+this.x+" "+this.y+"]"};n.prototype.isWall=function(){return this.type==e.WALL};return n});define("graph",["graphNode"],function(n){function e(e){for(var t=[],r=0;r<e.length;r++){t[r]=[];for(var i=0,o=e[r];i<o.length;i++)t[r][i]=new n(r,i,o[i])}this.input=e;this.nodes=t}e.prototype.toString=function(){for(var n,e,t,r,i="\n",o=this.nodes,a=0,u=o.length;u>a;a++){n="";e=o[a];for(t=0,r=e.length;r>t;t++)n+=e[t].type+" ";i=i+n+"\n"}return i};return e});define("world",["RNG","graph","eventmanager"],function(n,e,t){function r(){x=_.compose(c,f,c,c,i,o)();d=new e(x)}function i(e){var t,r;for(t=0;v>t;t++)for(r=0;g>r;r++)e[t][r]=n.getUniform()<L?1:0;return e}function o(){var n,e,t=[];for(n=0;v>n;n++){t[n]=[];for(e=0;g>e;e++)t[n][e]=0}return t}function a(n,e,t){for(var r=0,i=0;i<P.length;i++){var o=P[i],a=e+o[0],u=t+o[1];0>a||a>=g||0>a||u>=g||(r+=1===n[a][u]?1:0)}return r}function u(n,e){var t={};t.x=(n-e)/2;t.y=(n+e)/2;return t}function c(n){for(var e=0,t=o(),r=0;v>r;r++){var i=1,u=0;if(6===k){i=2;u=r%2}for(var c=u;g>c;c+=i){e++;var f=n[c][r],l=a(n,c,r);f&&-1!==w.indexOf(l)?t[c][r]=1:f||-1===b.indexOf(l)||(t[c][r]=1)}}return t}function f(n){for(var e=[],t=2,r=0;v>r;r++)for(var i=0;t>i;i++){var o=r*t+i;e[o]=[];for(var a=0;g>a;a++)for(var u=0;t>u;u++){var c=a*t+u;e[o][c]=n[r][a]}}g*=t;v*=t;return e}function l(n,e){return n>=0&&e>=0&&g>n&&v>e?!1:!0}function s(n,e){return{x:n,y:e}}function p(n){return 0===x[n.y][n.x]?!0:!1}function h(){var n={x:0,y:0};1===A.up&&(n.y=n.y-1);1===A.down&&(n.y=n.y+1);1===A.left&&(n.x=n.x-1);1===A.right&&(n.x=n.x+1);if(0!==n.x||0!==n.y){n=s(j.x+n.x,j.y+n.y);j.x=n.x;j.y=n.y;t.publish("center.update.start")}else t.publish("center.update.stop")}var d,v=30,g=30,y=132,m=66,x=[],b=[5,6,7,8],w=[4,5,6,7,8],k=8,j=u(0,0),L=.47,P=[[0,-1],[1,-1],[1,0],[1,1],[0,1],[-1,1],[-1,0],[-1,-1]],A={up:0,down:0,left:0,right:0};t.subscribe("new.frame",function(){h()});t.subscribe("pan.up",function(n){A.up=n});t.subscribe("pan.down",function(n){A.down=n});t.subscribe("pan.left",function(n){A.left=n});t.subscribe("pan.right",function(n){A.right=n});r();return{tileWidth:y,tileHeight:m,inBoundTile:s,outOfBound:l,tileIsOpen:p,height:v,width:g,mapData:x,center:j,graph:d}});define("standardlib",["world","eventmanager"],function(n){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}function t(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}function r(n,e){var t={};t.x=e+n;t.y=e-n;return t}function i(n,e){var t={};t.x=(n-e)/2;t.y=(n+e)/2;return t}function o(e,t){e-=n.width/2*n.tileWidth;var r=(e/(n.tileWidth/2)+t/(n.tileHeight/2))/2,i=(t/(n.tileHeight/2)-e/(n.tileWidth/2))/2;r=Math.floor(r);i=Math.floor(i);return{x:r,y:i}}function a(){}function u(n,e){var t=setInterval(function(){n()&&clearInterval(t)},1e3)}return{guid:t,isoToTwoD:r,twoDToIso:i,worldPosToGridPos:o,windowPosToGridPos:a,checkWait:u}});define("actor",["eventmanager","actorList","standardlib","world"],function(n,e,t,r){return function(e){var i={};i.init=function(){_.each(i.handlers,function(e,t){_.each(e,function(e,r){n[t](r,i[e])})});n.publish("actor.create",i.getInfo())};i.variables={coordinates:e.coordinates,width:r.tileWidth,height:r.tileHeight,uuid:t.guid(),direction:"down",hp:0,rendered:!1,canvas:{}};i.handlers={subscribe:{"actor.selected":"actorSelect"}};i.actorSelect=function(n){i.variables.selected=i.variables.uuid==n?!0:!1};i.getInfo=function(){return i};i.destroy=function(){n.publish("actor.delete",variables.uuid)};return i}});define("binaryHeap",[""],function(){function n(n){this.content=[];this.scoreFunction=n}n.prototype={push:function(n){this.content.push(n);this.sinkDown(this.content.length-1)},pop:function(){var n=this.content[0],e=this.content.pop();if(this.content.length>0){this.content[0]=e;this.bubbleUp(0)}return n},remove:function(n){var e=this.content.indexOf(n),t=this.content.pop();if(e!==this.content.length-1){this.content[e]=t;this.scoreFunction(t)<this.scoreFunction(n)?this.sinkDown(e):this.bubbleUp(e)}},size:function(){return this.content.length},rescoreElement:function(n){this.sinkDown(this.content.indexOf(n))},sinkDown:function(n){for(var e=this.content[n];n>0;){var t=(n+1>>1)-1,r=this.content[t];if(!(this.scoreFunction(e)<this.scoreFunction(r)))break;this.content[t]=e;this.content[n]=r;n=t}},bubbleUp:function(n){for(var e=this.content.length,t=this.content[n],r=this.scoreFunction(t);;){var i=n+1<<1,o=i-1,a=null;if(e>o){var u=this.content[o],c=this.scoreFunction(u);r>c&&(a=o)}if(e>i){var f=this.content[i],l=this.scoreFunction(f);(null===a?r:c)>l&&(a=i)}if(null===a)break;this.content[n]=this.content[a];this.content[a]=t;n=a}}};return n});define("astar",["binaryHeap"],function(n){var e={init:function(n){for(var e=0,t=n.length;t>e;e++)for(var r=0,i=n[e].length;i>r;r++){var o=n[e][r];o.f=0;o.g=0;o.h=0;o.cost=o.type;o.visited=!1;o.closed=!1;o.parent=null}},heap:function(){return new n(function(n){return n.f})},search:function(n,t,r,i,o){e.init(n);o=o||e.manhattan;i=!!i;var a=e.heap();a.push(t);for(;a.size()>0;){var u=a.pop();if(u===r){for(var c=u,f=[];c.parent;){f.push(c);c=c.parent}return f.reverse()}u.closed=!0;for(var l=e.neighbors(n,u,i),s=0,p=l.length;p>s;s++){var h=l[s];if(!h.closed&&!h.isWall()){var d=u.g+h.cost,v=h.visited;if(!v||d<h.g){h.visited=!0;h.parent=u;h.h=h.h||o(h.pos,r.pos);h.g=d;h.f=h.g+h.h;v?a.rescoreElement(h):a.push(h)}}}}return[]},manhattan:function(n,e){var t=Math.abs(e.x-n.x),r=Math.abs(e.y-n.y);return t+r},neighbors:function(n,e,t){var r=[],i=e.x,o=e.y;n[i-1]&&n[i-1][o]&&r.push(n[i-1][o]);n[i+1]&&n[i+1][o]&&r.push(n[i+1][o]);n[i]&&n[i][o-1]&&r.push(n[i][o-1]);n[i]&&n[i][o+1]&&r.push(n[i][o+1]);if(t){n[i-1]&&n[i-1][o-1]&&r.push(n[i-1][o-1]);n[i+1]&&n[i+1][o-1]&&r.push(n[i+1][o-1]);n[i-1]&&n[i-1][o+1]&&r.push(n[i-1][o+1]);n[i+1]&&n[i+1][o+1]&&r.push(n[i+1][o+1])}return r}};return e});define("actor.unit",["actor","eventmanager","astar","world"],function(n,e,t,r){return function(i){var o=n(i),a={path:[],focus:"",strenght:0,dexterity:0,intelligence:0,health:0,death:!1,hp:0,attack:10},u={"new.gamecycle":"move"};_.extend(o.variables,a);_.extend(o.handlers.subscribe,u);o.generatePath=function(){var n=r.graph.nodes[o.variables.coordinates.y][o.variables.coordinates.x],e=r.graph.nodes[o.variables.goal.y][o.variables.goal.x];o.variables.path=t.search(r.graph.nodes,n,e,!0)};o.move=function(){if(0!==o.variables.path.length){var n=_.first(o.variables.path);o.variables.path=_.rest(o.variables.path);var t={x:o.variables.coordinates.x-n.y,y:o.variables.coordinates.y-n.x};-1==t.x?o.variables.direction=0:1==t.x?o.variables.direction=2:-1==t.y?o.variables.direction=1:1==t.y&&(o.variables.direction=3);o.variables.coordinates={x:n.y,y:n.x};e.publish("command",{event:"actor.update",parameters:o})}};return o}});define("actor.unit.local",["actor.unit","eventmanager"],function(n){return function(e){var t=n(e),r={focus:"",state:"base"};_.extend(t.variables,r);var i={"map.click":"checkMapClick"};_.extend(t.handlers.subscribe,i);t.checkMapClick=function(n){if(t.variables.selected){t.variables.goal=n;t.generatePath()}};return t}});define("plane",["actor.unit.local","eventmanager"],function(n){return function(e){var t=n(e),r={focus:"",state:"base",direction:0,sprite:{center:{x:24,y:20},base:{0:["plane/base/Plane_Large_face0_0.png","plane/base/Plane_Large_face0_1.png","plane/base/Plane_Large_face0_2.png","plane/base/Plane_Large_face0_3.png"],1:["plane/base/Plane_Large_face1_0.png","plane/base/Plane_Large_face1_1.png","plane/base/Plane_Large_face1_2.png","plane/base/Plane_Large_face1_3.png"],2:["plane/base/Plane_Large_face2_0.png","plane/base/Plane_Large_face2_1.png","plane/base/Plane_Large_face2_2.png","plane/base/Plane_Large_face2_3.png"],3:["plane/base/Plane_Large_face3_0.png","plane/base/Plane_Large_face3_1.png","plane/base/Plane_Large_face3_2.png","plane/base/Plane_Large_face3_3.png"]},explode:{0:["plane/explode/color0_Plane_Large_face0_fiery_explode_0.png","plane/explode/color0_Plane_Large_face0_fiery_explode_1.png","plane/explode/color0_Plane_Large_face0_fiery_explode_2.png","plane/explode/color0_Plane_Large_face0_fiery_explode_3.png","plane/explode/color0_Plane_Large_face0_fiery_explode_4.png","plane/explode/color0_Plane_Large_face0_fiery_explode_5.png","plane/explode/color0_Plane_Large_face0_fiery_explode_6.png","plane/explode/color0_Plane_Large_face0_fiery_explode_7.png","plane/explode/color0_Plane_Large_face0_fiery_explode_8.png","plane/explode/color0_Plane_Large_face0_fiery_explode_9.png","plane/explode/color0_Plane_Large_face0_fiery_explode_10.png","plane/explode/color0_Plane_Large_face0_fiery_explode_11.png"],1:["plane/explode/color0_Plane_Large_face1_fiery_explode_0.png","plane/explode/color0_Plane_Large_face1_fiery_explode_1.png","plane/explode/color0_Plane_Large_face1_fiery_explode_2.png","plane/explode/color0_Plane_Large_face1_fiery_explode_3.png","plane/explode/color0_Plane_Large_face1_fiery_explode_4.png","plane/explode/color0_Plane_Large_face1_fiery_explode_5.png","plane/explode/color0_Plane_Large_face1_fiery_explode_6.png","plane/explode/color0_Plane_Large_face1_fiery_explode_7.png","plane/explode/color0_Plane_Large_face1_fiery_explode_8.png","plane/explode/color0_Plane_Large_face1_fiery_explode_9.png","plane/explode/color0_Plane_Large_face1_fiery_explode_10.png","plane/explode/color0_Plane_Large_face1_fiery_explode_11.png"],2:["plane/explode/color0_Plane_Large_face2_fiery_explode_0.png","plane/explode/color0_Plane_Large_face2_fiery_explode_1.png","plane/explode/color0_Plane_Large_face2_fiery_explode_2.png","plane/explode/color0_Plane_Large_face2_fiery_explode_3.png","plane/explode/color0_Plane_Large_face2_fiery_explode_4.png","plane/explode/color0_Plane_Large_face2_fiery_explode_5.png","plane/explode/color0_Plane_Large_face2_fiery_explode_6.png","plane/explode/color0_Plane_Large_face2_fiery_explode_7.png","plane/explode/color0_Plane_Large_face2_fiery_explode_8.png","plane/explode/color0_Plane_Large_face2_fiery_explode_9.png","plane/explode/color0_Plane_Large_face2_fiery_explode_10.png","plane/explode/color0_Plane_Large_face2_fiery_explode_11.png"],3:["plane/explode/color0_Plane_Large_face3_fiery_explode_0.png","plane/explode/color0_Plane_Large_face3_fiery_explode_1.png","plane/explode/color0_Plane_Large_face3_fiery_explode_2.png","plane/explode/color0_Plane_Large_face3_fiery_explode_3.png","plane/explode/color0_Plane_Large_face3_fiery_explode_4.png","plane/explode/color0_Plane_Large_face3_fiery_explode_5.png","plane/explode/color0_Plane_Large_face3_fiery_explode_6.png","plane/explode/color0_Plane_Large_face3_fiery_explode_7.png","plane/explode/color0_Plane_Large_face3_fiery_explode_8.png","plane/explode/color0_Plane_Large_face3_fiery_explode_9.png","plane/explode/color0_Plane_Large_face3_fiery_explode_10.png","plane/explode/color0_Plane_Large_face3_fiery_explode_11.png"]}},health:75,death:!1,hp:100};_.extend(t.variables,r);return t}});define("spriteSheet",[""],function(){var n=function(n,e){var t=[],r=n,i=e,o=function(){_.forEach(r.frames,function(n){var e=n,t=.5*-e.frame.w,r=.5*-e.frame.h;if(e.trimmed){t=e.spriteSourceSize.x-.5*e.sourceSize.w;r=e.spriteSourceSize.y-.5*e.sourceSize.h}a(e.filename,e.frame.x,e.frame.y,e.frame.w,e.frame.h,t,r)})},a=function(n,e,r,i,o,a,u){var c={id:n,x:e,y:r,w:i,h:o,cx:null===a?0:a,cy:null===u?0:u};t.push(c)};o();return{img:i,sprites:t}};return n});define("text!assetsList",[],function(){return'{\n  "0" : {\n    "name": "mapTiles",\n    "type": "atlas",\n    "configuration": "./art/panama.json",\n    "file": "./art/panama.png"\n  }\n}'});!function(n){if("function"==typeof bootstrap)bootstrap("promise",n);else if("object"==typeof exports&&"object"==typeof module)module.exports=n();else if("function"==typeof define&&define.amd)define("q",n);else if("undefined"!=typeof ses){if(!ses.ok())return;ses.makeQ=n}else{if("undefined"==typeof self)throw new Error("This environment was not anticiapted by Q. Please file a bug.");self.Q=n()}}(function(){function n(n){return function(){return X.apply(n,arguments)}}function e(n){return n===Object(n)}function t(n){return"[object StopIteration]"===ee(n)||n instanceof B}function r(n,e){if(U&&e.stack&&"object"==typeof n&&null!==n&&n.stack&&-1===n.stack.indexOf(te)){for(var t=[],r=e;r;r=r.source)r.stack&&t.unshift(r.stack);t.unshift(n.stack);var o=t.join("\n"+te+"\n");n.stack=i(o)}}function i(n){for(var e=n.split("\n"),t=[],r=0;r<e.length;++r){var i=e[r];u(i)||o(i)||!i||t.push(i)}return t.join("\n")}function o(n){return-1!==n.indexOf("(module.js:")||-1!==n.indexOf("(node.js:")}function a(n){var e=/at .+ \((.+):(\d+):(?:\d+)\)$/.exec(n);if(e)return[e[1],Number(e[2])];var t=/at ([^ ]+):(\d+):(?:\d+)$/.exec(n);if(t)return[t[1],Number(t[2])];var r=/.*@(.+):(\d+)$/.exec(n);return r?[r[1],Number(r[2])]:void 0}function u(n){var e=a(n);if(!e)return!1;var t=e[0],r=e[1];return t===H&&r>=q&&ae>=r}function c(){if(U)try{throw new Error
}catch(n){var e=n.stack.split("\n"),t=e[0].indexOf("@")>0?e[1]:e[2],r=a(t);if(!r)return;H=r[0];return r[1]}}function f(n,e,t){return function(){"undefined"!=typeof console&&"function"==typeof console.warn&&console.warn(e+" is deprecated, use "+t+" instead.",new Error("").stack);return n.apply(n,arguments)}}function l(n){return n instanceof d?n:y(n)?A(n):P(n)}function s(){function n(n){e=n;o.source=n;Q(t,function(e,t){l.nextTick(function(){n.promiseDispatch.apply(n,t)})},void 0);t=void 0;r=void 0}var e,t=[],r=[],i=J(s.prototype),o=J(d.prototype);o.promiseDispatch=function(n,i,o){var a=G(arguments);if(t){t.push(a);"when"===i&&o[1]&&r.push(o[1])}else l.nextTick(function(){e.promiseDispatch.apply(e,a)})};o.valueOf=function(){if(t)return o;var n=_(e);g(n)&&(e=n);return n};o.inspect=function(){return e?e.inspect():{state:"pending"}};if(l.longStackSupport&&U)try{throw new Error}catch(a){o.stack=a.stack.substring(a.stack.indexOf("\n")+1)}i.promise=o;i.resolve=function(t){e||n(l(t))};i.fulfill=function(t){e||n(P(t))};i.reject=function(t){e||n(L(t))};i.notify=function(n){e||Q(r,function(e,t){l.nextTick(function(){t(n)})},void 0)};return i}function p(n){if("function"!=typeof n)throw new TypeError("resolver must be a function.");var e=s();try{n(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function h(n){return p(function(e,t){for(var r=0,i=n.length;i>r;r++)l(n[r]).then(e,t)})}function d(n,e,t){void 0===e&&(e=function(n){return L(new Error("Promise does not support operation: "+n))});void 0===t&&(t=function(){return{state:"unknown"}});var r=J(d.prototype);r.promiseDispatch=function(t,i,o){var a;try{a=n[i]?n[i].apply(r,o):e.call(r,i,o)}catch(u){a=L(u)}t&&t(a)};r.inspect=t;if(t){var i=t();"rejected"===i.state&&(r.exception=i.reason);r.valueOf=function(){var n=t();return"pending"===n.state||"rejected"===n.state?r:n.value}}return r}function v(n,e,t,r){return l(n).then(e,t,r)}function _(n){if(g(n)){var e=n.inspect();if("fulfilled"===e.state)return e.value}return n}function g(n){return n instanceof d}function y(n){return e(n)&&"function"==typeof n.then}function m(n){return g(n)&&"pending"===n.inspect().state}function x(n){return!g(n)||"fulfilled"===n.inspect().state}function b(n){return g(n)&&"rejected"===n.inspect().state}function w(){re.length=0;ie.length=0;oe||(oe=!0)}function k(n,e){if(oe){ie.push(n);re.push(e&&"undefined"!=typeof e.stack?e.stack:"(no stack) "+e)}}function j(n){if(oe){var e=V(ie,n);if(-1!==e){ie.splice(e,1);re.splice(e,1)}}}function L(n){var e=d({when:function(e){e&&j(this);return e?e(n):this}},function(){return this},function(){return{state:"rejected",reason:n}});k(e,n);return e}function P(n){return d({when:function(){return n},get:function(e){return n[e]},set:function(e,t){n[e]=t},"delete":function(e){delete n[e]},post:function(e,t){return null===e||void 0===e?n.apply(void 0,t):n[e].apply(n,t)},apply:function(e,t){return n.apply(e,t)},keys:function(){return ne(n)}},void 0,function(){return{state:"fulfilled",value:n}})}function A(n){var e=s();l.nextTick(function(){try{n.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}});return e.promise}function R(n){return d({isDef:function(){}},function(e,t){return W(n,e,t)},function(){return l(n).inspect()})}function T(n,e,t){return l(n).spread(e,t)}function E(n){return function(){function e(n,e){var a;if("undefined"==typeof StopIteration){try{a=r[n](e)}catch(u){return L(u)}return a.done?l(a.value):v(a.value,i,o)}try{a=r[n](e)}catch(u){return t(u)?l(u.value):L(u)}return v(a,i,o)}var r=n.apply(this,arguments),i=e.bind(e,"next"),o=e.bind(e,"throw");return i()}}function I(n){l.done(l.async(n)())}function O(n){throw new B(n)}function S(n){return function(){return T([this,C(arguments)],function(e,t){return n.apply(e,t)})}}function W(n,e,t){return l(n).dispatch(e,t)}function C(n){return v(n,function(n){var e=0,t=s();Q(n,function(r,i,o){var a;if(g(i)&&"fulfilled"===(a=i.inspect()).state)n[o]=a.value;else{++e;v(i,function(r){n[o]=r;0===--e&&t.resolve(n)},t.reject,function(n){t.notify({index:o,value:n})})}},void 0);0===e&&t.resolve(n);return t.promise})}function F(n){return v(n,function(n){n=K(n,l);return v(C(K(n,function(n){return v(n,z,z)})),function(){return n})})}function N(n){return l(n).allSettled()}function $(n,e){return l(n).then(void 0,void 0,e)}function D(n,e){return l(n).nodeify(e)}var U=!1;try{throw new Error}catch(M){U=!!M.stack}var H,B,q=c(),z=function(){},Y=function(){function n(){for(;e.next;){e=e.next;var t=e.task;e.task=void 0;var i=e.domain;if(i){e.domain=void 0;i.enter()}try{t()}catch(a){if(o){i&&i.exit();setTimeout(n,0);i&&i.enter();throw a}setTimeout(function(){throw a},0)}i&&i.exit()}r=!1}var e={task:void 0,next:null},t=e,r=!1,i=void 0,o=!1;Y=function(n){t=t.next={task:n,domain:o&&process.domain,next:null};if(!r){r=!0;i()}};if("undefined"!=typeof process&&process.nextTick){o=!0;i=function(){process.nextTick(n)}}else if("function"==typeof setImmediate)i="undefined"!=typeof window?setImmediate.bind(window,n):function(){setImmediate(n)};else if("undefined"!=typeof MessageChannel){var a=new MessageChannel;a.port1.onmessage=function(){i=u;a.port1.onmessage=n;n()};var u=function(){a.port2.postMessage(0)};i=function(){setTimeout(n,0);u()}}else i=function(){setTimeout(n,0)};return Y}(),X=Function.call,G=n(Array.prototype.slice),Q=n(Array.prototype.reduce||function(n,e){var t=0,r=this.length;if(1===arguments.length)for(;;){if(t in this){e=this[t++];break}if(++t>=r)throw new TypeError}for(;r>t;t++)t in this&&(e=n(e,this[t],t));return e}),V=n(Array.prototype.indexOf||function(n){for(var e=0;e<this.length;e++)if(this[e]===n)return e;return-1}),K=n(Array.prototype.map||function(n,e){var t=this,r=[];Q(t,function(i,o,a){r.push(n.call(e,o,a,t))},void 0);return r}),J=Object.create||function(n){function e(){}e.prototype=n;return new e},Z=n(Object.prototype.hasOwnProperty),ne=Object.keys||function(n){var e=[];for(var t in n)Z(n,t)&&e.push(t);return e},ee=n(Object.prototype.toString);B="undefined"!=typeof ReturnValue?ReturnValue:function(n){this.value=n};var te="From previous event:";l.resolve=l;l.nextTick=Y;l.longStackSupport=!1;"object"==typeof process&&process&&process.env&&process.env.Q_DEBUG&&(l.longStackSupport=!0);l.defer=s;s.prototype.makeNodeResolver=function(){var n=this;return function(e,t){e?n.reject(e):n.resolve(arguments.length>2?G(arguments,1):t)}};l.Promise=p;l.promise=p;p.race=h;p.all=C;p.reject=L;p.resolve=l;l.passByCopy=function(n){return n};d.prototype.passByCopy=function(){return this};l.join=function(n,e){return l(n).join(e)};d.prototype.join=function(n){return l([this,n]).spread(function(n,e){if(n===e)return n;throw new Error("Can't join: not the same: "+n+" "+e)})};l.race=h;d.prototype.race=function(){return this.then(l.race)};l.makePromise=d;d.prototype.toString=function(){return"[object Promise]"};d.prototype.then=function(n,e,t){function i(e){try{return"function"==typeof n?n(e):e}catch(t){return L(t)}}function o(n){if("function"==typeof e){r(n,u);try{return e(n)}catch(t){return L(t)}}return L(n)}function a(n){return"function"==typeof t?t(n):n}var u=this,c=s(),f=!1;l.nextTick(function(){u.promiseDispatch(function(n){if(!f){f=!0;c.resolve(i(n))}},"when",[function(n){if(!f){f=!0;c.resolve(o(n))}}])});u.promiseDispatch(void 0,"when",[void 0,function(n){var e,t=!1;try{e=a(n)}catch(r){t=!0;if(!l.onerror)throw r;l.onerror(r)}t||c.notify(e)}]);return c.promise};l.tap=function(n,e){return l(n).tap(e)};d.prototype.tap=function(n){n=l(n);return this.then(function(e){return n.fcall(e).thenResolve(e)})};l.when=v;d.prototype.thenResolve=function(n){return this.then(function(){return n})};l.thenResolve=function(n,e){return l(n).thenResolve(e)};d.prototype.thenReject=function(n){return this.then(function(){throw n})};l.thenReject=function(n,e){return l(n).thenReject(e)};l.nearer=_;l.isPromise=g;l.isPromiseAlike=y;l.isPending=m;d.prototype.isPending=function(){return"pending"===this.inspect().state};l.isFulfilled=x;d.prototype.isFulfilled=function(){return"fulfilled"===this.inspect().state};l.isRejected=b;d.prototype.isRejected=function(){return"rejected"===this.inspect().state};var re=[],ie=[],oe=!0;l.resetUnhandledRejections=w;l.getUnhandledReasons=function(){return re.slice()};l.stopUnhandledRejectionTracking=function(){w();oe=!1};w();l.reject=L;l.fulfill=P;l.master=R;l.spread=T;d.prototype.spread=function(n,e){return this.all().then(function(e){return n.apply(void 0,e)},e)};l.async=E;l.spawn=I;l["return"]=O;l.promised=S;l.dispatch=W;d.prototype.dispatch=function(n,e){var t=this,r=s();l.nextTick(function(){t.promiseDispatch(r.resolve,n,e)});return r.promise};l.get=function(n,e){return l(n).dispatch("get",[e])};d.prototype.get=function(n){return this.dispatch("get",[n])};l.set=function(n,e,t){return l(n).dispatch("set",[e,t])};d.prototype.set=function(n,e){return this.dispatch("set",[n,e])};l.del=l["delete"]=function(n,e){return l(n).dispatch("delete",[e])};d.prototype.del=d.prototype["delete"]=function(n){return this.dispatch("delete",[n])};l.mapply=l.post=function(n,e,t){return l(n).dispatch("post",[e,t])};d.prototype.mapply=d.prototype.post=function(n,e){return this.dispatch("post",[n,e])};l.send=l.mcall=l.invoke=function(n,e){return l(n).dispatch("post",[e,G(arguments,2)])};d.prototype.send=d.prototype.mcall=d.prototype.invoke=function(n){return this.dispatch("post",[n,G(arguments,1)])};l.fapply=function(n,e){return l(n).dispatch("apply",[void 0,e])};d.prototype.fapply=function(n){return this.dispatch("apply",[void 0,n])};l["try"]=l.fcall=function(n){return l(n).dispatch("apply",[void 0,G(arguments,1)])};d.prototype.fcall=function(){return this.dispatch("apply",[void 0,G(arguments)])};l.fbind=function(n){var e=l(n),t=G(arguments,1);return function(){return e.dispatch("apply",[this,t.concat(G(arguments))])}};d.prototype.fbind=function(){var n=this,e=G(arguments);return function(){return n.dispatch("apply",[this,e.concat(G(arguments))])}};l.keys=function(n){return l(n).dispatch("keys",[])};d.prototype.keys=function(){return this.dispatch("keys",[])};l.all=C;d.prototype.all=function(){return C(this)};l.allResolved=f(F,"allResolved","allSettled");d.prototype.allResolved=function(){return F(this)};l.allSettled=N;d.prototype.allSettled=function(){return this.then(function(n){return C(K(n,function(n){function e(){return n.inspect()}n=l(n);return n.then(e,e)}))})};l.fail=l["catch"]=function(n,e){return l(n).then(void 0,e)};d.prototype.fail=d.prototype["catch"]=function(n){return this.then(void 0,n)};l.progress=$;d.prototype.progress=function(n){return this.then(void 0,void 0,n)};l.fin=l["finally"]=function(n,e){return l(n)["finally"](e)};d.prototype.fin=d.prototype["finally"]=function(n){n=l(n);return this.then(function(e){return n.fcall().then(function(){return e})},function(e){return n.fcall().then(function(){throw e})})};l.done=function(n,e,t,r){return l(n).done(e,t,r)};d.prototype.done=function(n,e,t){var i=function(n){l.nextTick(function(){r(n,o);if(!l.onerror)throw n;l.onerror(n)})},o=n||e||t?this.then(n,e,t):this;"object"==typeof process&&process&&process.domain&&(i=process.domain.bind(i));o.then(void 0,i)};l.timeout=function(n,e,t){return l(n).timeout(e,t)};d.prototype.timeout=function(n,e){var t=s(),r=setTimeout(function(){if(!e||"string"==typeof e){e=new Error(e||"Timed out after "+n+" ms");e.code="ETIMEDOUT"}t.reject(e)},n);this.then(function(n){clearTimeout(r);t.resolve(n)},function(n){clearTimeout(r);t.reject(n)},t.notify);return t.promise};l.delay=function(n,e){if(void 0===e){e=n;n=void 0}return l(n).delay(e)};d.prototype.delay=function(n){return this.then(function(e){var t=s();setTimeout(function(){t.resolve(e)},n);return t.promise})};l.nfapply=function(n,e){return l(n).nfapply(e)};d.prototype.nfapply=function(n){var e=s(),t=G(n);t.push(e.makeNodeResolver());this.fapply(t).fail(e.reject);return e.promise};l.nfcall=function(n){var e=G(arguments,1);return l(n).nfapply(e)};d.prototype.nfcall=function(){var n=G(arguments),e=s();n.push(e.makeNodeResolver());this.fapply(n).fail(e.reject);return e.promise};l.nfbind=l.denodeify=function(n){var e=G(arguments,1);return function(){var t=e.concat(G(arguments)),r=s();t.push(r.makeNodeResolver());l(n).fapply(t).fail(r.reject);return r.promise}};d.prototype.nfbind=d.prototype.denodeify=function(){var n=G(arguments);n.unshift(this);return l.denodeify.apply(void 0,n)};l.nbind=function(n,e){var t=G(arguments,2);return function(){function r(){return n.apply(e,arguments)}var i=t.concat(G(arguments)),o=s();i.push(o.makeNodeResolver());l(r).fapply(i).fail(o.reject);return o.promise}};d.prototype.nbind=function(){var n=G(arguments,0);n.unshift(this);return l.nbind.apply(void 0,n)};l.nmapply=l.npost=function(n,e,t){return l(n).npost(e,t)};d.prototype.nmapply=d.prototype.npost=function(n,e){var t=G(e||[]),r=s();t.push(r.makeNodeResolver());this.dispatch("post",[n,t]).fail(r.reject);return r.promise};l.nsend=l.nmcall=l.ninvoke=function(n,e){var t=G(arguments,2),r=s();t.push(r.makeNodeResolver());l(n).dispatch("post",[e,t]).fail(r.reject);return r.promise};d.prototype.nsend=d.prototype.nmcall=d.prototype.ninvoke=function(n){var e=G(arguments,1),t=s();e.push(t.makeNodeResolver());this.dispatch("post",[n,e]).fail(t.reject);return t.promise};l.nodeify=D;d.prototype.nodeify=function(n){if(!n)return this;this.then(function(e){l.nextTick(function(){n(null,e)})},function(e){l.nextTick(function(){n(e)})});return void 0};var ae=c();return l});define("assetLoader",["spriteSheet","text!assetsList","q","eventmanager"],function(n,e,t,r){var i={config:{},loaded:{atlas:[],music:[]}};i.config=JSON.parse(e);var o=function(){_.forEach(i.config,function(e){switch(e.type){case"atlas":jQuery.getJSON(e.configuration,function(n){e.configuration=n}).then(function(){var t=new Image;t.src=e.file;t.onload=function(){i.loaded.atlas.push({name:e.name,sprite:new n(e.configuration,t)});r.publish("game.init")}});break;case"music":}})};return{preloadassets:o,assets:i}});define("commandQueue",[""],function(){function n(n){r.push(n)}function e(){r=[]}function t(){return r}var r=[];return{add:n,get:t,clear:e}});define("command",["commandQueue","eventmanager"],function(n,e){function t(e){n.add(e)}function r(){var t=n.get();_.forEach(t,function(n){e.publish(n.event,n.parameters)});n.clear()}e.subscribe("command",function(n){t(n)});e.subscribe("new.gamecycle",function(){r()})});define("gamecycle",["eventmanager","command"],function(n){function e(){t()}function t(){setTimeout(t,200);n.publish("new.gamecycle")}n.subscribe("game.init",function(){e()})});define("RequestAnimationFrame",[""],function(){window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(n){window.setTimeout(n,1e3/16.5)}}()});define("map",["eventmanager","world","standardlib","assetLoader"],function(n,e,t,r){function i(){s.canvas=document.getElementById("mapCanvas");s.context=s.canvas.getContext("2d");s.canvas.width=e.width*e.tileWidth;s.canvas.height=e.height*e.tileHeight;s.canvas.addEventListener("contextmenu",function(e){var r=s.canvas.relmouseCoordinates(e);r=t.worldPosToGridPos(r.x,r.y);n.publish("map.click",r)});s.canvas.addEventListener("mousedown",function(n){if(1==n.which){$(".ghost-select").addClass("ghost-active");$(".ghost-select").css({left:n.pageX,top:n.pageY});initialW=n.pageX;initialH=n.pageY;$(document).bind("mouseup",o);$(document).bind("mousemove",a)}});u();f()}function o(){$(document).unbind("mousemove",a);$(document).unbind("mouseup",o);var e=$(".ghost-select");n.publish("map.selection",{width:e.width(),height:e.height(),left:e.offset().left,top:e.offset().top});$(".ghost-select").css({left:0,top:0,width:0,height:0}).removeClass("ghost-active")}function a(n){var e=Math.abs(initialW-n.pageX),t=Math.abs(initialH-n.pageY);$(".ghost-select").css({width:e,height:t});n.pageX<=initialW&&n.pageY>=initialH?$(".ghost-select").css({left:n.pageX}):n.pageY<=initialH&&n.pageX>=initialW?$(".ghost-select").css({top:n.pageY}):n.pageY<initialH&&n.pageX<initialW&&$(".ghost-select").css({left:n.pageX,top:n.pageY})}function u(){s.context.clearRect(0,0,s.canvas.width,s.canvas.height);for(var n={x:0,y:0},t=0;e.height>t;t++)for(var r=0;e.width>r;r++)e.outOfBound(n.y+t,n.x+r)||c(1===e.mapData[n.y+t][n.x+r]?{sprite:"trees_2.png",x:n.x+r,y:n.y+t,correction:15}:{sprite:"landscapeTiles_066.png",x:n.x+r,y:n.y+t,correction:15})}function c(n){var i,o,a;_.findIndex(r.assets.loaded.atlas,function(e){i=_.findWhere(e.sprite.sprites,{id:n.sprite});a=e.sprite.img;!_.isEmpty(e)});if(!_.isEmpty(i)){o=t.twoDToIso(n.x,n.y);o.x=o.x*e.tileWidth+s.canvas.width/2-(i.w-e.tileWidth)/2-e.tileWidth/2;o.y=o.y*e.tileHeight+(i.w/2-(i.h-n.correction));s.context.drawImage(a,i.x,i.y,i.w,i.h,o.x,o.y,i.w,i.h)}}function f(){var n=window.innerWidth/2,t=window.innerHeight/2,r={};r.x=-(e.center.x*e.tileWidth+s.canvas.width/2-n);r.y=-(e.center.y*e.tileHeight)+t;$(s.canvas).css("margin-left",r.x).css("margin-top",r.y)}function l(){f(e.center)}var s={};n.subscribe("new.frame",function(){l()});n.subscribe("game.init",function(){i()})});define("actors",["eventmanager","standardlib","world","actorList","assetLoader"],function(n,e,t,r,i){function o(){_.each(r.getCleanUpList(),function(n){$("canvas."+n.uuid).remove()});r.clearCleanUpList();_.each(r.getActorList(),function(e){if(f(e.variables.coordinates))if(e.variables.rendered)a(e);else{$(".ActorsWrapper").append('<canvas id="'+e.variables.uuid+'"></canvas>');e.variables.canvas=document.getElementById(e.variables.uuid);e.variables.canvas.context=e.variables.canvas.getContext("2d");e.variables.canvas.addEventListener("click",function(){n.publish("actor.selected",e.variables.uuid)});e.variables.rendered=!0;a(e)}else if(e.variables.rendered){$("canvas#"+e.variables.uuid).remove();e.variables.rendered=!1;e.variables.canvas=""}})}function a(n){u(n);c(n)}function u(n){var r=window.innerWidth/t.tileWidth,i=window.innerHeight/t.tileHeight,o=e.twoDToIso(n.variables.coordinates.x,n.variables.coordinates.y),a=t.center,u=o.y-a.y,c=(i/2-u-1)*t.tileHeight+20;$(n.variables.canvas).css("z-index",n.variables.coordinates.y).css("bottom",c);var f=o.x-(a.x-r/2),l=f*t.tileWidth-n.variables.sprite.center.x;$(n.variables.canvas).css("left",l)}function c(n){n.variables.canvas.context.clearRect(0,0,n.variables.canvas.width,n.variables.canvas.height);"undefined"==typeof n.variables.sprite[n.variables.state][n.variables.direction][n.variables.spriteIndex]&&(n.variables.spriteIndex=0);l({sprite:n.variables.sprite[n.variables.state][n.variables.direction][n.variables.spriteIndex],canvas:n.variables.canvas});n.variables.selected&&s({canvas:n.variables.canvas,health:n.variables.health,hp:n.variables.hp});n.variables.spriteIndex++}function f(n){var r=e.twoDToIso(n.x,n.y),i=t.center,o=Math.ceil(window.innerWidth/t.tileWidth),a=Math.ceil(window.innerHeight/t.tileHeight);return r.x>=i.x-o/2&&r.x<=i.x+o/2&&r.y>=i.y-a/2&&r.y<=i.y+a/2?!0:!1}function l(n){var e,t;_.findIndex(i.assets.loaded.atlas,function(r){e=_.findWhere(r.sprite.sprites,{id:n.sprite});t=r.sprite.img;!_.isEmpty(r)});if(!_.isEmpty(e)){n.canvas.width=e.w;n.canvas.height=e.h+h;n.canvas.context.drawImage(t,e.x,e.y,e.w,e.h,0,h,e.w,e.h)}}function s(n){n.canvas.context.fillStyle="red";n.canvas.context.fillRect((n.canvas.width-40)/2,0,38,h-2);n.canvas.context.fillStyle="green";var e=n.health/n.hp;n.canvas.context.fillRect((n.canvas.width-40)/2,0,38*e,h-2)}function p(n){var i=window.innerWidth/2,o=window.innerHeight/2,a={};a.x=-(t.center.x*t.tileWidth+t.width*t.tileWidth/2-i);a.y=-(t.center.y*t.tileHeight)+o;var u=-a.x+n.left,c=-a.y+n.top,f=e.worldPosToGridPos(u,c);f=e.twoDToIso(f.x,f.y);var l=e.worldPosToGridPos(u+n.width,c+n.height);l=e.twoDToIso(l.x,l.y);_.each(r.getActorList(),function(n){var t=e.twoDToIso(n.variables.coordinates.x,n.variables.coordinates.y);n.variables.selected=t.x>=f.x&&t.x<=l.x&&t.y>=f.y&&t.y<=l.y?!0:!1})}var h=7.5;n.subscribe("new.frame",function(){o()});n.subscribe("center.update.start",function(){$(".ActorsWrapper").removeClass("no-panning")});n.subscribe("center.update.stop",function(){$(".ActorsWrapper").addClass("no-panning")});n.subscribe("map.selection",function(n){p(n)})});define("animate",["eventmanager","RequestAnimationFrame","map","actors"],function(n){function e(){n.publish("new.frame");window.setTimeout(e,100)}n.subscribe("game.init",function(){e()});return{}});define("mouse",["eventmanager"],function(n){HTMLCanvasElement.prototype.relmouseCoordinates=function(n){var e=0,t=0,r=0,i=0,o=this;do{e+=o.offsetLeft-o.scrollLeft;t+=o.offsetTop-o.scrollTop}while(o===o.offsetParent);r=n.pageX-e;i=n.pageY-t;return{x:r,y:i}};window.oncontextmenu=function(n){n.preventDefault();n.stopPropagation();return!1};var e=function(){};n.subscribe("game.init",function(){e()})});define("input",["eventmanager","mouse","Keypress"],function(n,e,t){var r=new t.Listener,i=[{keys:"up",prevent_repeat:!0,on_keydown:function(){n.publish("pan.up",1)},on_keyup:function(){n.publish("pan.up",0)}},{keys:"down",prevent_repeat:!0,on_keydown:function(){n.publish("pan.down",1)},on_keyup:function(){n.publish("pan.down",0)}},{keys:"left",prevent_repeat:!0,on_keydown:function(){n.publish("pan.left",1)},on_keyup:function(){n.publish("pan.left",0)}},{keys:"right",prevent_repeat:!0,on_keydown:function(){n.publish("pan.right",1)},on_keyup:function(){n.publish("pan.right",0)}}];r.register_many(i)});define("scripts/app",["lodash","jquery","plane","assetLoader","eventmanager","gamecycle","animate","input"],function(n,e,t,r){r.preloadassets();t({coordinates:{x:30,y:30}}).init();t({coordinates:{x:29,y:30}}).init();t({coordinates:{x:31,y:30}}).init();t({coordinates:{x:30,y:29}}).init();t({coordinates:{x:30,y:31}}).init();t({coordinates:{x:33,y:30}}).init();t({coordinates:{x:29,y:31}}).init();t({coordinates:{x:31,y:31}}).init();t({coordinates:{x:30,y:28}}).init()});